{"version":3,"sources":["api/workflows.js","views/canvas/CanvasNode.js","views/canvas/ButtonEdge.js","ui-component/extended/Transitions.js","ui-component/dialog/AttachmentDialog.js","ui-component/dialog/HTMLDialog.js","hooks/useConfirm.js","api/executions.js","views/executions/index.js","menu-items/settings.js","views/settings/index.js","ui-component/dialog/SaveWorkflowDialog.js","views/canvas/CanvasHeader.js","views/canvas/AddNodes.js","api/nodes.js","views/output/OutputResponses.js","views/canvas/VariableSelector.js","views/canvas/EditNodes.js","ui-component/dialog/ConfirmDialog.js","ui-component/dialog/TestWorkflowDialog.js","api/webhooks.js","views/canvas/index.js"],"names":["getAllWorkflows","client","get","getSpecificWorkflow","shortId","createNewWorkflow","body","post","updateWorkflow","put","deployWorkflow","deleteWorkflow","delete","testWorkflow","startingNodeId","CardWrapper","styled","MainCard","theme","backgroundColor","border","color","darkTextPrimary","width","height","padding","boxShadow","borderColor","palette","primary","main","handlerPosition","CanvasNode","data","useTheme","content","sx","selected","text","secondary","outputResponses","submit","Avatar","variant","typography","smallAvatar","borderRadius","background","success","dark","ml","position","top","right","needRetest","warning","Box","inputAnchors","map","inputAnchor","index","type","Position","Top","id","style","left","length","display","flexDirection","alignItems","item","marginRight","commonAvatar","largeAvatar","cursor","src","baseURL","name","alt","Typography","fontSize","fontWeight","label","outputAnchors","outputAnchor","Bottom","bottom","ButtonEdge","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","markerEnd","edgePath","getBezierPath","getEdgeCenter","edgeCenterX","edgeCenterY","dispatch","useDispatch","className","d","x","y","labelStyle","fill","labelBgStyle","labelBgPadding","labelBgBorderRadius","foreignObjectSize","requiredExtensions","onClick","event","evt","stopPropagation","REMOVE_EDGE","edgeId","onEdgeClick","Transitions","forwardRef","ref","children","direction","others","positionSX","transformOrigin","Grow","Collapse","Fade","timeout","appear","enter","exit","Slide","Zoom","defaultProps","TabPanel","props","value","other","role","hidden","p","AttachmentDialog","show","dialogProps","onCancel","portalElement","document","getElementById","useState","setValue","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","component","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","title","DialogContent","Tabs","onChange","newValue","executionData","execObj","execObjIndex","Tab","attachments","attachment","attchIndex","marginBottom","justifyContent","filename","contentType","size","href","download","rel","target","borderStyle","minHeight","minWidth","createPortal","resolveCallback","HTMLDialog","html","overflow","dangerouslySetInnerHTML","__html","useConfirm","useContext","ConfirmContext","confirmState","closeConfirm","HIDE_CONFIRM","confirm","confirmPayload","SHOW_CONFIRM","payload","Promise","res","onConfirm","Executions","workflowShortId","execution","executionCount","isExecutionOpen","anchorEl","expanded","setExpanded","setOpen","showHTMLDialog","setShowHTMLDialog","HTMLDialogProps","setHTMLDialogProps","showAttachmentDialog","setShowAttachmentDialog","attachmentDialogProps","setAttachmentDialogProps","showExpandDialog","setShowExpandDialog","expandDialogProps","setExpandDialogProps","varPrevOpen","useRef","useNotifier","enqueueSnackbar","enqueueSnackbarAction","closeSnackbar","closeSnackbarAction","setChipBgColor","execState","light","error","grey","deleteExecution","e","executionShortId","description","confirmButtonName","cancelButtonName","executionsApi","workflowsApi","workflowResponse","SET_WORKFLOW","workflow","message","options","key","Date","getTime","random","action","Button","errorData","response","status","statusText","persist","useEffect","current","Popper","placement","undefined","transition","disablePortal","popperOptions","modifiers","offset","zIndex","TransitionProps","in","Paper","elevation","shadow","shadows","Stack","maxHeight","overflowX","List","py","breakpoints","down","my","pl","exec","Accordion","isExpanded","AccordionSummary","expandIcon","mr","mb","state","Chip","moment","createdDate","format","IconButton","JSON","parse","execData","execDataIndex","AccordionDetails","nodeLabel","collapsed","enableClipboard","copyToClipboard","dialogProp","onExpandDialogClicked","mt","pb","ExpandDataDialog","icons","IconTrash","IconFileUpload","IconFileExport","settings","url","icon","Settings","isSettingsOpen","onSettingsItemClick","onUploadFile","settingsMenu","setSettingsMenu","filter","menu","items","NavItem","level","navType","SaveWorkflowDialog","workflowName","setWorkflowName","isReadyToSave","setIsReadyToSave","OutlinedInput","placeholder","DialogActions","disabled","CanvasHeader","handleSaveFlow","handleDeployWorkflow","handleStopWorkflow","handleDeleteWorkflow","handleLoadWorkflow","navigate","useNavigate","workflowNameRef","viewExecutionRef","settingsRef","isEditingWorkflowName","setEditingWorkflowName","setExecutionOpen","setSettingsOpen","workfowDialogOpen","setWorkfowDialogOpen","updateWorkflowApi","useApi","canvas","useSelector","ButtonBase","mediumAvatar","stroke","flexGrow","isDirty","orange","deployed","TextField","inputRef","defaultValue","updateBody","request","setting","flowData","dataStr","stringify","generateExportFlowData","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","createElement","setAttribute","click","console","file","AddNodes","nodesData","node","customization","searchValue","setSearchValue","nodes","setNodes","anchorRef","prevOpen","handleClose","contains","focus","Fab","ClickAwayListener","onClickAway","pr","setTimeout","returnData","nd","toLowerCase","includes","startAdornment","InputAdornment","inputProps","Divider","onDragStart","dataTransfer","setData","effectAllowed","draggable","ListItemButton","ListItem","ListItemAvatar","objectFit","ListItemText","OutputResponses","nodeId","nodeParamsType","nodeFlowData","edges","onSubmit","outputResponse","setOutputResponse","errorResponse","setErrorResponse","nodeName","setNodeName","nodeType","setNodeType","setNodeLabel","isTestNodeBtnDisabled","disableTestNodeBtn","testNodeLoading","setTestNodeLoading","testNodeApi","nodesApi","output","paramsTypes","paramType","checkIfTestNodeValid","selectedNode","find","testNodeData","errorMessage","loading","webhookEndpoint","spacing","startIcon","navigator","clipboard","writeText","window","respObj","respObjIndex","openAttachmentDialog","AnimateButton","disableElevation","alert","testNodeBody","socket","socketIOClient","on","clientId","disconnect","onTestNodeClick","CircularProgress","marginTop","marginLeft","VariableSelector","isVariableSelectorOpen","onVariableSelected","onClipboardCopy","namespaces","namespace","returnVariablePath","test","endsWith","substring","onCopyClick","EditNodes","onNodeLabelUpdate","onNodeValuesUpdate","setNodeFlowData","nodeDetails","setNodeDetails","nodeParams","setNodeParams","setNodeParamsType","nodeParamsInitialValues","setNodeParamsInitialValues","nodeParamsValidation","setNodeParamsValidation","setVariableSelectorOpen","variableBody","setVariableBody","availableNodesForVariable","setAvailableNodesForVariable","isEditVariableDialogOpen","setEditVariableDialog","editVariableDialogProps","setEditVariableDialogProps","ps","getSpecificNodeApi","scrollTop","curr","handleAccordionChange","paramsType","handleNodeLabelChange","saveNodeLabel","onEditVariableDialogOpen","input","values","arrayItemBody","variableNodesIds","getAvailableNodeIdsForVariable","nodesForVariable","push","setVariableSelectorState","variableSelectorState","paramsChanged","formParams","credentialMethodParam","param","credentialMethodParamIndex","findIndex","originalParam","updateNodeDetails","valueChanged","formValues","updateNodeFlowData","outputResponsesFlowData","indexOf","showHideParameters","displayType","toBeDeleteParams","displayOptions","Object","keys","forEach","path","comparisonValue","replace","groundValue","lodash","Array","isArray","RegExp","displayParameters","params","arrayIndex","arrayInitialValue","inputArray","j","array","arrayParams","hide","returnParams","prm","showHideOptions","returnOptions","toBeDeleteOptions","option","opt","clonedParams","initializeFormValuesAndParams","initialValues","reorganizedParams","cloneDeep","handleCredentialParams","default","newObj","validationSchema","inputOptional","optional","Yup","required","matches","numberOrExpressionRegex","setYupValidation","actions","networks","credentials","inputParameters","containerRef","el","pt","textAlign","InputParameters","CredentialInput","initialParams","initialValidation","newInput","textBeforeCursorPosition","textAfterCursorPosition","clonedNodeFlowData","set","EditVariableDialog","updateValues","ConfirmDialog","DialogContentText","TestWorkflowDialog","onItemClick","nodeTypes","customNode","edgeTypes","buttonedge","Canvas","URLpath","location","pathname","toString","split","startsWith","canvasDataStore","setCanvasDataStore","setWorkflow","isTestWorkflowDialogOpen","setTestWorkflowDialogOpen","testWorkflowDialogProps","setTestWorkflowDialogProps","isTestingWorkflow","setIsTestingWorkflow","useNodesState","onNodesChange","useEdgesState","setEdges","onEdgesChange","rfInstance","setRfInstance","setSelectedNode","reactFlowWrapper","getNodesApi","removeTestTriggersApi","deleteAllTestWebhooksApi","webhooksApi","createNewWorkflowApi","testWorkflowApi","getSpecificWorkflowApi","rfInstanceObject","toObject","newWorkflowBody","savedWorkflowResponse","REMOVE_DIRTY","deployedWorkflowResponse","halt","stoppedWorkflowResponse","onNodeDoubleClick","useCallback","clickedNode","nds","checkIfNodeLabelUnique","getNodes","setDirty","onDragOver","preventDefault","dropEffect","onDrop","reactFlowBounds","getBoundingClientRect","nodeData","getData","checkMultipleTriggers","generateWebhookEndpoint","project","clientX","clientY","newNodeId","getUniqueNodeId","newNode","addAnchors","concat","saveWorkflowSuccess","SET_DIRTY","initialFlow","history","replaceState","getEdges","edge","removeEdgeId","usePrompt","AppBar","enableColorOnDark","bgcolor","Toolbar","onNodeDragStop","onConnect","newEdge","source","sourceHandle","targetHandle","getEdgeLabelName","eds","addEdge","onInit","fitView","nodeStrokeColor","nodeColor","nodeBorderRadius","transform","gap","outputValues"],"mappings":"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","file":"static/js/11.263c3323.chunk.js","sourcesContent":["import client from './client';\r\n\r\nconst getAllWorkflows = () => client.get('/workflows');\r\n\r\nconst getSpecificWorkflow = (shortId) => client.get(`/workflows/${shortId}`);\r\n\r\nconst createNewWorkflow = (body) => client.post(`/workflows`, body); //body: IWorkflow\r\n\r\nconst updateWorkflow = (shortId, body) => client.put(`/workflows/${shortId}`, body); //body: IWorkflow\r\n\r\nconst deployWorkflow = (shortId, body) => client.post(`/workflows/deploy/${shortId}`, body || {}); //body: { halt: boolean }\r\n\r\nconst testWorkflow = (startingNodeId, body) => client.post(`/workflows/test/${startingNodeId}`, body); //body: ITestWorkflowBody\r\n\r\nconst deleteWorkflow = (shortId) => client.delete(`/workflows/${shortId}`);\r\n\r\nexport default {\r\n    getAllWorkflows,\r\n    getSpecificWorkflow,\r\n    createNewWorkflow,\r\n    updateWorkflow,\r\n    deployWorkflow,\r\n    deleteWorkflow,\r\n    testWorkflow\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport { Handle, Position } from 'react-flow-renderer';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport { Avatar, Box, Typography } from '@mui/material';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\n\r\n// icons\r\nimport { IconCheck, IconExclamationMark } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst CardWrapper = styled(MainCard)(({ theme }) => ({\r\n    backgroundColor: '#ffffff',\r\n    border: 'solid 1px',\r\n    color: theme.darkTextPrimary,\r\n    width: '200px',\r\n    height: 'auto',\r\n    padding: '10px',\r\n    boxShadow: '0 2px 14px 0 rgb(32 40 45 / 8%)',\r\n    '&:hover': {\r\n        borderColor: theme.palette.primary.main\r\n    }\r\n}));\r\n\r\nconst handlerPosition = [[['50%']], [['30%'], ['70%']]];\r\n\r\n// ===========================|| CANVAS NODE ||=========================== //\r\n\r\nconst CanvasNode = ({ data }) => {\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <>\r\n            <CardWrapper\r\n                content={false}\r\n                sx={{\r\n                    borderColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary\r\n                }}\r\n                border={false}\r\n            >\r\n                {data && data.outputResponses && data.outputResponses.submit && (\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.smallAvatar,\r\n                            borderRadius: '50%',\r\n                            background: theme.palette.success.dark,\r\n                            color: 'white',\r\n                            ml: 2,\r\n                            position: 'absolute',\r\n                            top: -10,\r\n                            right: -10\r\n                        }}\r\n                    >\r\n                        <IconCheck />\r\n                    </Avatar>\r\n                )}\r\n\r\n                {data && data.outputResponses && data.outputResponses.needRetest && (\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.smallAvatar,\r\n                            borderRadius: '50%',\r\n                            background: theme.palette.warning.dark,\r\n                            color: 'white',\r\n                            ml: 2,\r\n                            position: 'absolute',\r\n                            top: -10,\r\n                            right: -10\r\n                        }}\r\n                    >\r\n                        <IconExclamationMark />\r\n                    </Avatar>\r\n                )}\r\n\r\n                <Box>\r\n                    {data.inputAnchors.map((inputAnchor, index) => (\r\n                        <Handle\r\n                            type=\"target\"\r\n                            position={Position.Top}\r\n                            key={inputAnchor.id}\r\n                            id={inputAnchor.id}\r\n                            style={{\r\n                                height: 15,\r\n                                width: 15,\r\n                                top: -7.5,\r\n                                backgroundColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary,\r\n                                left: handlerPosition[data.inputAnchors.length - 1][index]\r\n                            }}\r\n                        />\r\n                    ))}\r\n                    <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n                        <Box item style={{ width: 50, marginRight: 10 }}>\r\n                            <div\r\n                                style={{\r\n                                    ...theme.typography.commonAvatar,\r\n                                    ...theme.typography.largeAvatar,\r\n                                    backgroundColor: 'white',\r\n                                    cursor: 'grab'\r\n                                }}\r\n                            >\r\n                                <img\r\n                                    style={{ width: '100%', height: '100%' }}\r\n                                    src={`${baseURL}/api/v1/node-icon/${data.name}`}\r\n                                    alt=\"Notification\"\r\n                                />\r\n                            </div>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography\r\n                                sx={{\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: 500\r\n                                }}\r\n                            >\r\n                                {data.label}\r\n                            </Typography>\r\n                        </Box>\r\n                    </div>\r\n                    {data.outputAnchors.map((outputAnchor, index) => (\r\n                        <Handle\r\n                            type=\"source\"\r\n                            position={Position.Bottom}\r\n                            key={outputAnchor.id}\r\n                            id={outputAnchor.id}\r\n                            style={{\r\n                                height: 15,\r\n                                width: 15,\r\n                                bottom: -7.5,\r\n                                backgroundColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary,\r\n                                left: handlerPosition[data.outputAnchors.length - 1][index]\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </Box>\r\n            </CardWrapper>\r\n        </>\r\n    );\r\n};\r\n\r\nCanvasNode.propTypes = {\r\n    data: PropTypes.object\r\n};\r\n\r\nexport default CanvasNode;\r\n","import { getBezierPath, getEdgeCenter, EdgeText } from 'react-flow-renderer';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { REMOVE_EDGE } from 'store/actions';\r\n\r\nimport './index.css';\r\n\r\nconst foreignObjectSize = 40;\r\n\r\nconst ButtonEdge = ({ id, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, style = {}, data, markerEnd }) => {\r\n    const edgePath = getBezierPath({\r\n        sourceX,\r\n        sourceY,\r\n        sourcePosition,\r\n        targetX,\r\n        targetY,\r\n        targetPosition\r\n    });\r\n\r\n    const [edgeCenterX, edgeCenterY] = getEdgeCenter({\r\n        sourceX,\r\n        sourceY,\r\n        targetX,\r\n        targetY\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onEdgeClick = (evt, id) => {\r\n        evt.stopPropagation();\r\n        dispatch({ type: REMOVE_EDGE, edgeId: id });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <path id={id} style={style} className=\"react-flow__edge-path\" d={edgePath} markerEnd={markerEnd} />\r\n            {data && data.label && (\r\n                <EdgeText\r\n                    x={sourceX + 10}\r\n                    y={sourceY + 10}\r\n                    label={data.label}\r\n                    labelStyle={{ fill: 'black' }}\r\n                    labelBgStyle={{ fill: 'transparent' }}\r\n                    labelBgPadding={[2, 4]}\r\n                    labelBgBorderRadius={2}\r\n                />\r\n            )}\r\n            <foreignObject\r\n                width={foreignObjectSize}\r\n                height={foreignObjectSize}\r\n                x={edgeCenterX - foreignObjectSize / 2}\r\n                y={edgeCenterY - foreignObjectSize / 2}\r\n                className=\"edgebutton-foreignobject\"\r\n                requiredExtensions=\"http://www.w3.org/1999/xhtml\"\r\n            >\r\n                <div>\r\n                    <button type=\"button\" className=\"edgebutton\" onClick={(event) => onEdgeClick(event, id)}>\r\n                        ×\r\n                    </button>\r\n                </div>\r\n            </foreignObject>\r\n        </>\r\n    );\r\n};\r\n\r\nButtonEdge.propTypes = {\r\n    id: PropTypes.string,\r\n    sourceX: PropTypes.number,\r\n    sourceY: PropTypes.number,\r\n    targetX: PropTypes.number,\r\n    targetY: PropTypes.number,\r\n    sourcePosition: PropTypes.any,\r\n    targetPosition: PropTypes.any,\r\n    style: PropTypes.object,\r\n    data: PropTypes.object,\r\n    markerEnd: PropTypes.any\r\n};\r\n\r\nexport default ButtonEdge;\r\n","import PropTypes from 'prop-types';\r\nimport { forwardRef } from 'react';\r\n\r\n// material-ui\r\nimport { Collapse, Fade, Box, Grow, Slide, Zoom } from '@mui/material';\r\n\r\n// ==============================|| TRANSITIONS ||============================== //\r\n\r\nconst Transitions = forwardRef(({ children, position, type, direction, ...others }, ref) => {\r\n    let positionSX = {\r\n        transformOrigin: '0 0 0'\r\n    };\r\n\r\n    switch (position) {\r\n        case 'top-right':\r\n            positionSX = {\r\n                transformOrigin: 'top right'\r\n            };\r\n            break;\r\n        case 'top':\r\n            positionSX = {\r\n                transformOrigin: 'top'\r\n            };\r\n            break;\r\n        case 'bottom-left':\r\n            positionSX = {\r\n                transformOrigin: 'bottom left'\r\n            };\r\n            break;\r\n        case 'bottom-right':\r\n            positionSX = {\r\n                transformOrigin: 'bottom right'\r\n            };\r\n            break;\r\n        case 'bottom':\r\n            positionSX = {\r\n                transformOrigin: 'bottom'\r\n            };\r\n            break;\r\n        case 'top-left':\r\n        default:\r\n            positionSX = {\r\n                transformOrigin: '0 0 0'\r\n            };\r\n            break;\r\n    }\r\n\r\n    return (\r\n        <Box ref={ref}>\r\n            {type === 'grow' && (\r\n                <Grow {...others}>\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Grow>\r\n            )}\r\n            {type === 'collapse' && (\r\n                <Collapse {...others} sx={positionSX}>\r\n                    {children}\r\n                </Collapse>\r\n            )}\r\n            {type === 'fade' && (\r\n                <Fade\r\n                    {...others}\r\n                    timeout={{\r\n                        appear: 500,\r\n                        enter: 600,\r\n                        exit: 400\r\n                    }}\r\n                >\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Fade>\r\n            )}\r\n            {type === 'slide' && (\r\n                <Slide\r\n                    {...others}\r\n                    timeout={{\r\n                        appear: 0,\r\n                        enter: 400,\r\n                        exit: 200\r\n                    }}\r\n                    direction={direction}\r\n                >\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Slide>\r\n            )}\r\n            {type === 'zoom' && (\r\n                <Zoom {...others}>\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Zoom>\r\n            )}\r\n        </Box>\r\n    );\r\n});\r\n\r\nTransitions.propTypes = {\r\n    children: PropTypes.node,\r\n    type: PropTypes.oneOf(['grow', 'fade', 'collapse', 'slide', 'zoom']),\r\n    position: PropTypes.oneOf(['top-left', 'top-right', 'top', 'bottom-left', 'bottom-right', 'bottom']),\r\n    direction: PropTypes.oneOf(['up', 'down', 'left', 'right'])\r\n};\r\n\r\nTransitions.defaultProps = {\r\n    type: 'grow',\r\n    position: 'top-left',\r\n    direction: 'up'\r\n};\r\n\r\nexport default Transitions;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Dialog, DialogContent, DialogTitle, Tabs, Tab, Box, Typography } from '@mui/material';\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`attachment-tabpanel-${index}`}\r\n            aria-labelledby={`attachment-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && <Box sx={{ p: 1 }}>{children}</Box>}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `attachment-tab-${index}`,\r\n        'aria-controls': `attachment-tabpanel-${index}`\r\n    };\r\n}\r\n\r\nconst AttachmentDialog = ({ show, dialogProps, onCancel }) => {\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const formatBytes = (bytes, decimals = 2) => {\r\n        if (bytes === 0) return '0 Bytes';\r\n\r\n        const k = 1024;\r\n        const dm = decimals < 0 ? 0 : decimals;\r\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n    };\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            onClose={onCancel}\r\n            fullWidth\r\n            maxWidth=\"lg\"\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Tabs value={value} onChange={handleChange} aria-label=\"attachment tabs\">\r\n                    {dialogProps.executionData.map((execObj, execObjIndex) => (\r\n                        <Tab key={execObjIndex} label={`Item ${execObjIndex}`} {...a11yProps(execObjIndex)} />\r\n                    ))}\r\n                </Tabs>\r\n                {dialogProps.executionData.map((execObj, execObjIndex) => (\r\n                    <TabPanel key={execObjIndex} value={value} index={execObjIndex}>\r\n                        {execObj.attachments &&\r\n                            execObj.attachments.map((attachment, attchIndex) => (\r\n                                <div key={attchIndex} style={{ marginBottom: 10 }}>\r\n                                    <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\r\n                                        <Typography sx={{ p: 1 }} variant=\"h5\">\r\n                                            {attachment.filename ? attachment.filename : `Attachment ${attchIndex}`} |{' '}\r\n                                            {attachment.contentType} {attachment.size ? ` | ${formatBytes(attachment.size)}` : ''}\r\n                                        </Typography>\r\n                                        <a href={attachment.content} download rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                            Download File\r\n                                        </a>\r\n                                    </div>\r\n                                    <embed\r\n                                        src={attachment.content}\r\n                                        width=\"100%\"\r\n                                        height=\"100%\"\r\n                                        type={attachment.contentType}\r\n                                        style={{ borderStyle: 'solid', minHeight: '100vh', minWidth: '100vh' }}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        {!execObj.attachments && <div>No Attachment</div>}\r\n                    </TabPanel>\r\n                ))}\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n};\r\n\r\nAttachmentDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func\r\n};\r\n\r\nexport default AttachmentDialog;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Dialog, DialogContent, DialogTitle, Tabs, Tab, Box } from '@mui/material';\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`attachment-tabpanel-${index}`}\r\n            aria-labelledby={`attachment-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && <Box sx={{ p: 1 }}>{children}</Box>}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired\r\n};\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `attachment-tab-${index}`,\r\n        'aria-controls': `attachment-tabpanel-${index}`\r\n    };\r\n}\r\n\r\nconst HTMLDialog = ({ show, dialogProps, onCancel }) => {\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            onClose={onCancel}\r\n            fullWidth\r\n            maxWidth=\"lg\"\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Tabs value={value} onChange={handleChange} aria-label=\"attachment tabs\">\r\n                    {dialogProps.executionData.map((execObj, execObjIndex) => (\r\n                        <Tab key={execObjIndex} label={`Item ${execObjIndex}`} {...a11yProps(execObjIndex)} />\r\n                    ))}\r\n                </Tabs>\r\n                {dialogProps.executionData.map((execObj, execObjIndex) => (\r\n                    <TabPanel key={execObjIndex} value={value} index={execObjIndex}>\r\n                        {execObj.html && (\r\n                            <div\r\n                                style={{ width: '100%', height: '100%', overflow: 'auto' }}\r\n                                dangerouslySetInnerHTML={{ __html: execObj.html }}\r\n                            />\r\n                        )}\r\n                        {!execObj.html && <div>No HTML</div>}\r\n                    </TabPanel>\r\n                ))}\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n};\r\n\r\nHTMLDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func\r\n};\r\n\r\nexport default HTMLDialog;\r\n","import { useContext } from 'react';\r\nimport ConfirmContext from 'store/context/ConfirmContext';\r\nimport { HIDE_CONFIRM, SHOW_CONFIRM } from 'store/actions';\r\n\r\nlet resolveCallback;\r\nconst useConfirm = () => {\r\n    const [confirmState, dispatch] = useContext(ConfirmContext);\r\n\r\n    const closeConfirm = () => {\r\n        dispatch({\r\n            type: HIDE_CONFIRM\r\n        });\r\n    };\r\n\r\n    const onConfirm = () => {\r\n        closeConfirm();\r\n        resolveCallback(true);\r\n    };\r\n\r\n    const onCancel = () => {\r\n        closeConfirm();\r\n        resolveCallback(false);\r\n    };\r\n    const confirm = (confirmPayload) => {\r\n        dispatch({\r\n            type: SHOW_CONFIRM,\r\n            payload: confirmPayload\r\n        });\r\n        return new Promise((res) => {\r\n            resolveCallback = res;\r\n        });\r\n    };\r\n\r\n    return { confirm, onConfirm, onCancel, confirmState };\r\n};\r\n\r\nexport default useConfirm;\r\n","import client from './client';\r\n\r\nconst getAllExecutions = () => client.get('/executions');\r\n\r\nconst getSpecificExecution = (shortId) => client.get(`/executions/${shortId}`);\r\n\r\nconst createNewExecution = (body) => client.post(`/executions`, body); //body: IExecution\r\n\r\nconst updateExecution = (shortId, body) => client.put(`/executions/${shortId}`, body); //body: IExecution\r\n\r\nconst deleteExecution = (shortId) => client.delete(`/executions/${shortId}`);\r\n\r\nexport default {\r\n    getAllExecutions,\r\n    getSpecificExecution,\r\n    createNewExecution,\r\n    updateExecution,\r\n    deleteExecution\r\n};\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { SET_WORKFLOW, enqueueSnackbar as enqueueSnackbarAction, closeSnackbar as closeSnackbarAction } from 'store/actions';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport {\r\n    Box,\r\n    List,\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    Paper,\r\n    Popper,\r\n    Chip,\r\n    Stack,\r\n    Typography,\r\n    Button,\r\n    IconButton\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport moment from 'moment';\r\nimport ReactJson from 'react-json-view';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport AttachmentDialog from 'ui-component/dialog/AttachmentDialog';\r\nimport HTMLDialog from 'ui-component/dialog/HTMLDialog';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// hooks\r\nimport useConfirm from 'hooks/useConfirm';\r\nimport useNotifier from 'utils/useNotifier';\r\n\r\n// icon\r\nimport { IconTrash, IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// API\r\nimport executionsApi from 'api/executions';\r\nimport workflowsApi from 'api/workflows';\r\n\r\n// utils\r\nimport { copyToClipboard } from 'utils/genericHelper';\r\n\r\n// ==============================|| EXECUTIONS ||============================== //\r\n\r\nconst Executions = ({ workflowShortId, execution, executionCount, isExecutionOpen, anchorEl }) => {\r\n    const theme = useTheme();\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showHTMLDialog, setShowHTMLDialog] = useState(false);\r\n    const [HTMLDialogProps, setHTMLDialogProps] = useState({});\r\n    const [showAttachmentDialog, setShowAttachmentDialog] = useState(false);\r\n    const [attachmentDialogProps, setAttachmentDialogProps] = useState({});\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const dispatch = useDispatch();\r\n    const varPrevOpen = useRef(open);\r\n    const { confirm } = useConfirm();\r\n\r\n    useNotifier();\r\n    const enqueueSnackbar = (...args) => dispatch(enqueueSnackbarAction(...args));\r\n    const closeSnackbar = (...args) => dispatch(closeSnackbarAction(...args));\r\n\r\n    const handleAccordionChange = (executionShortId) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? executionShortId : false);\r\n    };\r\n\r\n    const setChipColor = (execState) => {\r\n        if (execState === 'INPROGRESS') return theme.palette.warning.dark;\r\n        if (execState === 'FINISHED') return theme.palette.success.dark;\r\n        if (execState === 'ERROR') return theme.palette.error.dark;\r\n        if (execState === 'TERMINATED' || execState === 'TIMEOUT') return theme.palette.grey['700'];\r\n        return theme.palette.primary.dark;\r\n    };\r\n\r\n    const setChipBgColor = (execState) => {\r\n        if (execState === 'INPROGRESS') return theme.palette.warning.light;\r\n        if (execState === 'FINISHED') return theme.palette.success.light;\r\n        if (execState === 'ERROR') return theme.palette.error.light;\r\n        if (execState === 'TERMINATED' || execState === 'TIMEOUT') return theme.palette.grey['300'];\r\n        return theme.palette.primary.light;\r\n    };\r\n\r\n    const openAttachmentDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'Attachments',\r\n            executionData\r\n        };\r\n        setAttachmentDialogProps(dialogProp);\r\n        setShowAttachmentDialog(true);\r\n    };\r\n\r\n    const openHTMLDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'HTML',\r\n            executionData\r\n        };\r\n        setHTMLDialogProps(dialogProp);\r\n        setShowHTMLDialog(true);\r\n    };\r\n\r\n    const onExpandDialogClicked = (executionData, nodeLabel) => {\r\n        const dialogProp = {\r\n            title: `Execution Data: ${nodeLabel}`,\r\n            data: executionData\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    const deleteExecution = async (e, executionShortId) => {\r\n        e.stopPropagation();\r\n        const confirmPayload = {\r\n            title: `Delete`,\r\n            description: `Delete execution ${executionShortId}?`,\r\n            confirmButtonName: 'Delete',\r\n            cancelButtonName: 'Cancel'\r\n        };\r\n        const isConfirmed = await confirm(confirmPayload);\r\n\r\n        if (isConfirmed) {\r\n            try {\r\n                const executionResp = await executionsApi.deleteExecution(executionShortId);\r\n                if (executionResp.data) {\r\n                    const workflowResponse = await workflowsApi.getSpecificWorkflow(workflowShortId);\r\n                    if (workflowResponse.data) dispatch({ type: SET_WORKFLOW, workflow: workflowResponse.data });\r\n                }\r\n                enqueueSnackbar({\r\n                    message: 'Execution deleted!',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'success',\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n            } catch (error) {\r\n                const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    // Handle Accordian\r\n    useEffect(() => {\r\n        varPrevOpen.current = open;\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        setOpen(isExecutionOpen);\r\n    }, [isExecutionOpen]);\r\n\r\n    return (\r\n        <>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [170, 20]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{ zIndex: 1000 }}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <Box sx={{ p: 2 }}>\r\n                                    <Stack>\r\n                                        <Typography variant=\"h4\">{executionCount} Executions</Typography>\r\n                                    </Stack>\r\n                                </Box>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                    {executionCount === 0 && execution.length === 0 && <Box sx={{ p: 2 }}>No executions yet</Box>}\r\n\r\n                                    {executionCount > 0 && execution.length > 0 && (\r\n                                        <Box sx={{ p: 2 }}>\r\n                                            <List\r\n                                                sx={{\r\n                                                    width: '100%',\r\n                                                    maxWidth: 330,\r\n                                                    py: 0,\r\n                                                    borderRadius: '10px',\r\n                                                    [theme.breakpoints.down('md')]: {\r\n                                                        maxWidth: 300\r\n                                                    },\r\n                                                    '& .MuiListItemSecondaryAction-root': {\r\n                                                        top: 22\r\n                                                    },\r\n                                                    '& .MuiDivider-root': {\r\n                                                        my: 0\r\n                                                    },\r\n                                                    '& .list-container': {\r\n                                                        pl: 7\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {execution &&\r\n                                                    execution.map((exec, index) => (\r\n                                                        <Box key={index}>\r\n                                                            <Accordion\r\n                                                                expanded={expanded === exec.shortId}\r\n                                                                onChange={handleAccordionChange(exec.shortId)}\r\n                                                            >\r\n                                                                <AccordionSummary\r\n                                                                    expandIcon={<ExpandMoreIcon />}\r\n                                                                    aria-controls={`${exec.shortId}-content`}\r\n                                                                    id={`${exec.shortId}-header`}\r\n                                                                >\r\n                                                                    <Stack sx={{ p: 1, mr: 1 }} direction=\"column\">\r\n                                                                        <Stack sx={{ mb: 1, alignItems: 'center' }} direction=\"row\">\r\n                                                                            <Typography variant=\"h5\">{exec.shortId}</Typography>\r\n                                                                            {exec.state && (\r\n                                                                                <Chip\r\n                                                                                    sx={{\r\n                                                                                        color: setChipColor(exec.state),\r\n                                                                                        backgroundColor: setChipBgColor(exec.state),\r\n                                                                                        ml: 1\r\n                                                                                    }}\r\n                                                                                    label={exec.state}\r\n                                                                                />\r\n                                                                            )}\r\n                                                                        </Stack>\r\n                                                                        <Stack sx={{ mb: -1, alignItems: 'center' }} direction=\"row\">\r\n                                                                            <Typography\r\n                                                                                variant=\"h6\"\r\n                                                                                sx={{ color: theme.palette.grey['500'] }}\r\n                                                                            >\r\n                                                                                {moment(exec.createdDate).format(\r\n                                                                                    'MMMM Do YYYY, h:mm:ss A z'\r\n                                                                                )}\r\n                                                                            </Typography>\r\n                                                                            <IconButton\r\n                                                                                size=\"small\"\r\n                                                                                sx={{ height: 25, width: 25, ml: 1 }}\r\n                                                                                title=\"Delete Execution\"\r\n                                                                                color=\"error\"\r\n                                                                                onClick={(e) => deleteExecution(e, exec.shortId)}\r\n                                                                            >\r\n                                                                                <IconTrash />\r\n                                                                            </IconButton>\r\n                                                                        </Stack>\r\n                                                                    </Stack>\r\n                                                                </AccordionSummary>\r\n                                                                {JSON.parse(exec.executionData).map((execData, execDataIndex) => (\r\n                                                                    <AccordionDetails key={execDataIndex}>\r\n                                                                        <Box\r\n                                                                            sx={{\r\n                                                                                p: 2,\r\n                                                                                backgroundColor: theme.palette.secondary.light,\r\n                                                                                borderRadius: `15px`,\r\n                                                                                position: 'relative'\r\n                                                                            }}\r\n                                                                            key={execDataIndex}\r\n                                                                        >\r\n                                                                            <Typography sx={{ p: 1 }} variant=\"h5\">\r\n                                                                                {execData.nodeLabel}\r\n                                                                            </Typography>\r\n                                                                            <ReactJson\r\n                                                                                collapsed\r\n                                                                                src={execData.data}\r\n                                                                                enableClipboard={(e) => copyToClipboard(e)}\r\n                                                                            />\r\n                                                                            <IconButton\r\n                                                                                size=\"small\"\r\n                                                                                sx={{\r\n                                                                                    height: 25,\r\n                                                                                    width: 25,\r\n                                                                                    position: 'absolute',\r\n                                                                                    top: 5,\r\n                                                                                    right: 5\r\n                                                                                }}\r\n                                                                                title=\"Expand Data\"\r\n                                                                                color=\"primary\"\r\n                                                                                onClick={() =>\r\n                                                                                    onExpandDialogClicked(execData.data, execData.nodeLabel)\r\n                                                                                }\r\n                                                                            >\r\n                                                                                <IconArrowsMaximize />\r\n                                                                            </IconButton>\r\n                                                                            <div>\r\n                                                                                {execData.data.map((execObj, execObjIndex) => (\r\n                                                                                    <div key={execObjIndex}>\r\n                                                                                        {execObj.html && (\r\n                                                                                            <Typography sx={{ p: 1, mt: 2 }} variant=\"h5\">\r\n                                                                                                HTML\r\n                                                                                            </Typography>\r\n                                                                                        )}\r\n                                                                                        {execObj.html && (\r\n                                                                                            <div\r\n                                                                                                style={{\r\n                                                                                                    width: '100%',\r\n                                                                                                    height: '100%',\r\n                                                                                                    maxHeight: 400,\r\n                                                                                                    overflow: 'auto',\r\n                                                                                                    backgroundColor: 'white',\r\n                                                                                                    borderRadius: 5\r\n                                                                                                }}\r\n                                                                                                dangerouslySetInnerHTML={{\r\n                                                                                                    __html: execObj.html\r\n                                                                                                }}\r\n                                                                                            />\r\n                                                                                        )}\r\n                                                                                        {execObj.html && (\r\n                                                                                            <Button\r\n                                                                                                sx={{ mt: 1 }}\r\n                                                                                                size=\"small\"\r\n                                                                                                variant=\"contained\"\r\n                                                                                                onClick={() =>\r\n                                                                                                    openHTMLDialog(execData.data)\r\n                                                                                                }\r\n                                                                                            >\r\n                                                                                                View HTML\r\n                                                                                            </Button>\r\n                                                                                        )}\r\n\r\n                                                                                        {execObj.attachments && (\r\n                                                                                            <Typography\r\n                                                                                                sx={{ p: 1, pb: 0, mt: 2 }}\r\n                                                                                                variant=\"h5\"\r\n                                                                                            >\r\n                                                                                                Attachments\r\n                                                                                            </Typography>\r\n                                                                                        )}\r\n                                                                                        {execObj.attachments &&\r\n                                                                                            execObj.attachments.map(\r\n                                                                                                (attachment, attchIndex) => (\r\n                                                                                                    <div key={attchIndex}>\r\n                                                                                                        <Typography\r\n                                                                                                            sx={{ p: 1 }}\r\n                                                                                                            variant=\"h6\"\r\n                                                                                                        >\r\n                                                                                                            Item {execObjIndex} |{' '}\r\n                                                                                                            {attachment.filename\r\n                                                                                                                ? attachment.filename\r\n                                                                                                                : `Attachment ${attchIndex}`}\r\n                                                                                                        </Typography>\r\n                                                                                                        <embed\r\n                                                                                                            src={attachment.content}\r\n                                                                                                            width=\"100%\"\r\n                                                                                                            height=\"100%\"\r\n                                                                                                            style={{ borderStyle: 'solid' }}\r\n                                                                                                            type={attachment.contentType}\r\n                                                                                                        />\r\n                                                                                                        <Button\r\n                                                                                                            size=\"small\"\r\n                                                                                                            variant=\"contained\"\r\n                                                                                                            onClick={() =>\r\n                                                                                                                openAttachmentDialog(\r\n                                                                                                                    execData.data\r\n                                                                                                                )\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            View Attachment\r\n                                                                                                        </Button>\r\n                                                                                                    </div>\r\n                                                                                                )\r\n                                                                                            )}\r\n                                                                                    </div>\r\n                                                                                ))}\r\n                                                                            </div>\r\n                                                                        </Box>\r\n                                                                    </AccordionDetails>\r\n                                                                ))}\r\n                                                            </Accordion>\r\n                                                        </Box>\r\n                                                    ))}\r\n                                            </List>\r\n                                        </Box>\r\n                                    )}\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n            <AttachmentDialog\r\n                show={showAttachmentDialog}\r\n                dialogProps={attachmentDialogProps}\r\n                onCancel={() => setShowAttachmentDialog(false)}\r\n            ></AttachmentDialog>\r\n            <HTMLDialog show={showHTMLDialog} dialogProps={HTMLDialogProps} onCancel={() => setShowHTMLDialog(false)}></HTMLDialog>\r\n            <ExpandDataDialog\r\n                show={showExpandDialog}\r\n                dialogProps={expandDialogProps}\r\n                onCancel={() => setShowExpandDialog(false)}\r\n            ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nExecutions.propTypes = {\r\n    workflowShortId: PropTypes.string,\r\n    execution: PropTypes.array,\r\n    executionCount: PropTypes.number,\r\n    isExecutionOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any\r\n};\r\n\r\nexport default Executions;\r\n","// assets\r\nimport { IconTrash, IconFileUpload, IconFileExport } from '@tabler/icons';\r\n\r\n// constant\r\nconst icons = { IconTrash, IconFileUpload, IconFileExport };\r\n\r\n// ==============================|| SETTINGS MENU ITEMS ||============================== //\r\n\r\nconst settings = {\r\n    id: 'settings',\r\n    title: '',\r\n    type: 'group',\r\n    children: [\r\n        {\r\n            id: 'loadWorkflow',\r\n            title: 'Load Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconFileUpload\r\n        },\r\n        {\r\n            id: 'exportWorkflow',\r\n            title: 'Export Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconFileExport\r\n        },\r\n        {\r\n            id: 'deleteWorkflow',\r\n            title: 'Delete Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconTrash\r\n        }\r\n    ]\r\n};\r\n\r\nexport default settings;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Box, List, Paper, Popper } from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport NavItem from 'layout/MainLayout/Sidebar/MenuList/NavItem';\r\n\r\nimport settings from 'menu-items/settings';\r\n\r\n// ==============================|| SETTINGS ||============================== //\r\n\r\nconst Settings = ({ workflow, isSettingsOpen, anchorEl, onSettingsItemClick, onUploadFile }) => {\r\n    const theme = useTheme();\r\n    const [settingsMenu, setSettingsMenu] = useState([]);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (workflow && !workflow.shortId) {\r\n            const settingsMenu = settings.children.filter((menu) => menu.id === 'loadWorkflow');\r\n            setSettingsMenu(settingsMenu);\r\n        } else if (workflow && workflow.shortId) {\r\n            const settingsMenu = settings.children;\r\n            setSettingsMenu(settingsMenu);\r\n        }\r\n    }, [workflow]);\r\n\r\n    useEffect(() => {\r\n        setOpen(isSettingsOpen);\r\n    }, [isSettingsOpen]);\r\n\r\n    // settings list items\r\n    const items = settingsMenu.map((menu) => {\r\n        return (\r\n            <NavItem\r\n                key={menu.id}\r\n                item={menu}\r\n                level={1}\r\n                navType=\"SETTINGS\"\r\n                onClick={(id) => onSettingsItemClick(id)}\r\n                onUploadFile={onUploadFile}\r\n            />\r\n        );\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [170, 20]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{ zIndex: 1000 }}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <List>{items}</List>\r\n                                    </Box>\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nSettings.propTypes = {\r\n    workflow: PropTypes.object,\r\n    isSettingsOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any,\r\n    onSettingsItemClick: PropTypes.func,\r\n    onUploadFile: PropTypes.func\r\n};\r\n\r\nexport default Settings;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Button, Dialog, DialogActions, DialogContent, OutlinedInput, DialogTitle } from '@mui/material';\r\n\r\nconst SaveWorkflowDialog = ({ show, dialogProps, onCancel, onConfirm }) => {\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [workflowName, setWorkflowName] = useState('');\r\n    const [isReadyToSave, setIsReadyToSave] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (workflowName) setIsReadyToSave(true);\r\n        else setIsReadyToSave(false);\r\n    }, [workflowName]);\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            fullWidth\r\n            maxWidth=\"xs\"\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <OutlinedInput\r\n                    sx={{ mt: 1 }}\r\n                    id=\"workflow-name\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                    placeholder=\"My New Workflow\"\r\n                    value={workflowName}\r\n                    onChange={(e) => setWorkflowName(e.target.value)}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={onCancel}>{dialogProps.cancelButtonName}</Button>\r\n                <Button disabled={!isReadyToSave} variant=\"contained\" onClick={() => onConfirm(workflowName)}>\r\n                    {dialogProps.confirmButtonName}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n};\r\n\r\nSaveWorkflowDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n    onConfirm: PropTypes.func\r\n};\r\n\r\nexport default SaveWorkflowDialog;\r\n","import PropTypes from 'prop-types';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Avatar, Box, ButtonBase, Typography, Stack, TextField, Chip } from '@mui/material';\r\n\r\n// icons\r\nimport {\r\n    IconSettings,\r\n    IconChevronLeft,\r\n    IconDeviceFloppy,\r\n    IconRocket,\r\n    IconPencil,\r\n    IconCheck,\r\n    IconX,\r\n    IconPlayerPause,\r\n    IconListCheck\r\n} from '@tabler/icons';\r\n\r\n// project imports\r\nimport Executions from 'views/executions';\r\nimport Settings from 'views/settings';\r\nimport SaveWorkflowDialog from 'ui-component/dialog/SaveWorkflowDialog';\r\n\r\n// API\r\nimport workflowsApi from 'api/workflows';\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi';\r\n\r\n// utils\r\nimport { generateExportFlowData } from 'utils/genericHelper';\r\n\r\n// ==============================|| CANVAS HEADER ||============================== //\r\n\r\nconst CanvasHeader = ({ workflow, handleSaveFlow, handleDeployWorkflow, handleStopWorkflow, handleDeleteWorkflow, handleLoadWorkflow }) => {\r\n    const theme = useTheme();\r\n    const navigate = useNavigate();\r\n    const workflowNameRef = useRef();\r\n    const viewExecutionRef = useRef();\r\n    const settingsRef = useRef();\r\n\r\n    const [isEditingWorkflowName, setEditingWorkflowName] = useState(null);\r\n    const [workflowName, setWorkflowName] = useState('');\r\n    const [isExecutionOpen, setExecutionOpen] = useState(false);\r\n    const [isSettingsOpen, setSettingsOpen] = useState(false);\r\n    const [workfowDialogOpen, setWorkfowDialogOpen] = useState(false);\r\n\r\n    const updateWorkflowApi = useApi(workflowsApi.updateWorkflow);\r\n    const canvas = useSelector((state) => state.canvas);\r\n\r\n    const onSettingsItemClick = (setting) => {\r\n        setSettingsOpen(false);\r\n\r\n        if (setting === 'deleteWorkflow') {\r\n            handleDeleteWorkflow();\r\n        } else if (setting === 'exportWorkflow') {\r\n            try {\r\n                const flowData = JSON.parse(workflow.flowData);\r\n                let dataStr = JSON.stringify(generateExportFlowData(flowData));\r\n                let dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\r\n\r\n                let exportFileDefaultName = `${workflow.name} Workflow.json`;\r\n\r\n                let linkElement = document.createElement('a');\r\n                linkElement.setAttribute('href', dataUri);\r\n                linkElement.setAttribute('download', exportFileDefaultName);\r\n                linkElement.click();\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const onUploadFile = (file) => {\r\n        setSettingsOpen(false);\r\n        handleLoadWorkflow(file);\r\n    };\r\n\r\n    const submitWorkflowName = () => {\r\n        if (workflow.shortId) {\r\n            const updateBody = {\r\n                name: workflowNameRef.current.value\r\n            };\r\n            updateWorkflowApi.request(workflow.shortId, updateBody);\r\n        }\r\n    };\r\n\r\n    const onSaveWorkflowClick = () => {\r\n        if (workflow.shortId) handleSaveFlow(workflow.name);\r\n        else setWorkfowDialogOpen(true);\r\n    };\r\n\r\n    const onConfirmSaveName = (workflowName) => {\r\n        setWorkfowDialogOpen(false);\r\n        handleSaveFlow(workflowName);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (updateWorkflowApi.data) {\r\n            setWorkflowName(updateWorkflowApi.data.name);\r\n        }\r\n        setEditingWorkflowName(false);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [updateWorkflowApi.data]);\r\n\r\n    useEffect(() => {\r\n        if (workflow) {\r\n            setWorkflowName(workflow.name);\r\n        }\r\n    }, [workflow]);\r\n\r\n    return (\r\n        <>\r\n            <Box>\r\n                <ButtonBase title=\"Back\" sx={{ borderRadius: '50%' }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.secondary.light,\r\n                            color: theme.palette.secondary.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.secondary.dark,\r\n                                color: theme.palette.secondary.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={() => navigate(-1)}\r\n                    >\r\n                        <IconChevronLeft stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n            </Box>\r\n            <Box sx={{ flexGrow: 1 }}>\r\n                {!isEditingWorkflowName && (\r\n                    <Stack flexDirection=\"row\">\r\n                        <Typography\r\n                            sx={{\r\n                                fontSize: '1.5rem',\r\n                                fontWeight: 600,\r\n                                ml: 2\r\n                            }}\r\n                        >\r\n                            {canvas.isDirty && <strong style={{ color: theme.palette.orange.main }}>*</strong>} {workflowName}\r\n                        </Typography>\r\n                        {workflow?.shortId && (\r\n                            <ButtonBase title=\"Edit Name\" sx={{ borderRadius: '50%' }}>\r\n                                <Avatar\r\n                                    variant=\"rounded\"\r\n                                    sx={{\r\n                                        ...theme.typography.commonAvatar,\r\n                                        ...theme.typography.mediumAvatar,\r\n                                        transition: 'all .2s ease-in-out',\r\n                                        background: 'white',\r\n                                        color: theme.palette.text.dark,\r\n                                        ml: 1,\r\n                                        '&:hover': {\r\n                                            background: theme.palette.secondary.light,\r\n                                            color: theme.palette.secondary.dark\r\n                                        }\r\n                                    }}\r\n                                    color=\"inherit\"\r\n                                    onClick={() => setEditingWorkflowName(true)}\r\n                                >\r\n                                    <IconPencil stroke={1.5} size=\"1.3rem\" />\r\n                                </Avatar>\r\n                            </ButtonBase>\r\n                        )}\r\n                        {workflow?.deployed && (\r\n                            <Chip\r\n                                sx={{\r\n                                    color: theme.palette.success.dark,\r\n                                    backgroundColor: theme.palette.success.light,\r\n                                    ml: 1\r\n                                }}\r\n                                label=\"Deployed\"\r\n                                color=\"success\"\r\n                            />\r\n                        )}\r\n                    </Stack>\r\n                )}\r\n                {isEditingWorkflowName && (\r\n                    <Stack flexDirection=\"row\">\r\n                        <TextField\r\n                            size=\"small\"\r\n                            inputRef={workflowNameRef}\r\n                            sx={{\r\n                                width: '50%',\r\n                                ml: 2\r\n                            }}\r\n                            defaultValue={workflowName}\r\n                        />\r\n                        <ButtonBase title=\"Save Name\" sx={{ borderRadius: '50%' }}>\r\n                            <Avatar\r\n                                variant=\"rounded\"\r\n                                sx={{\r\n                                    ...theme.typography.commonAvatar,\r\n                                    ...theme.typography.mediumAvatar,\r\n                                    transition: 'all .2s ease-in-out',\r\n                                    background: 'white',\r\n                                    color: theme.palette.text.dark,\r\n                                    ml: 1,\r\n                                    '&:hover': {\r\n                                        background: theme.palette.secondary.light,\r\n                                        color: theme.palette.secondary.dark\r\n                                    }\r\n                                }}\r\n                                color=\"inherit\"\r\n                                onClick={submitWorkflowName}\r\n                            >\r\n                                <IconCheck stroke={1.5} size=\"1.3rem\" />\r\n                            </Avatar>\r\n                        </ButtonBase>\r\n                        <ButtonBase title=\"Cancel\" sx={{ borderRadius: '50%' }}>\r\n                            <Avatar\r\n                                variant=\"rounded\"\r\n                                sx={{\r\n                                    ...theme.typography.commonAvatar,\r\n                                    ...theme.typography.mediumAvatar,\r\n                                    transition: 'all .2s ease-in-out',\r\n                                    background: 'white',\r\n                                    color: theme.palette.text.dark,\r\n                                    ml: 1,\r\n                                    '&:hover': {\r\n                                        background: theme.palette.error.light,\r\n                                        color: theme.palette.error.dark\r\n                                    }\r\n                                }}\r\n                                color=\"inherit\"\r\n                                onClick={() => setEditingWorkflowName(false)}\r\n                            >\r\n                                <IconX stroke={1.5} size=\"1.3rem\" />\r\n                            </Avatar>\r\n                        </ButtonBase>\r\n                    </Stack>\r\n                )}\r\n            </Box>\r\n            <Box>\r\n                {workflow?.shortId && (\r\n                    <ButtonBase ref={viewExecutionRef} title=\"View Executions\" sx={{ borderRadius: '50%', mr: 2 }}>\r\n                        <Avatar\r\n                            variant=\"rounded\"\r\n                            sx={{\r\n                                ...theme.typography.commonAvatar,\r\n                                ...theme.typography.mediumAvatar,\r\n                                width: '54px',\r\n                                transition: 'all .2s ease-in-out',\r\n                                background: theme.palette.success.light,\r\n                                color: theme.palette.success.dark,\r\n                                '&:hover': {\r\n                                    background: theme.palette.success.dark,\r\n                                    color: theme.palette.success.light\r\n                                }\r\n                            }}\r\n                            color=\"inherit\"\r\n                            onClick={() => setExecutionOpen(!isExecutionOpen)}\r\n                        >\r\n                            <h6>{workflow?.executionCount}</h6>&nbsp;\r\n                            <IconListCheck stroke={1.5} size=\"1.3rem\" />\r\n                        </Avatar>\r\n                    </ButtonBase>\r\n                )}\r\n                {workflow?.shortId && (\r\n                    <ButtonBase title={workflow?.deployed ? 'Stop Workflow' : 'Deploy Workflow'} sx={{ borderRadius: '50%', mr: 2 }}>\r\n                        <Avatar\r\n                            variant=\"rounded\"\r\n                            sx={{\r\n                                ...theme.typography.commonAvatar,\r\n                                ...theme.typography.mediumAvatar,\r\n                                transition: 'all .2s ease-in-out',\r\n                                background: theme.palette.primary.light,\r\n                                color: theme.palette.primary.dark,\r\n                                '&:hover': {\r\n                                    background: theme.palette.primary.dark,\r\n                                    color: theme.palette.primary.light\r\n                                }\r\n                            }}\r\n                            color=\"inherit\"\r\n                            onClick={workflow?.deployed ? handleStopWorkflow : handleDeployWorkflow}\r\n                        >\r\n                            {workflow?.deployed ? (\r\n                                <IconPlayerPause stroke={1.5} size=\"1.3rem\" />\r\n                            ) : (\r\n                                <IconRocket stroke={1.5} size=\"1.3rem\" />\r\n                            )}\r\n                        </Avatar>\r\n                    </ButtonBase>\r\n                )}\r\n                <ButtonBase title=\"Save Workflow\" sx={{ borderRadius: '50%', mr: 2 }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.secondary.light,\r\n                            color: theme.palette.secondary.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.secondary.dark,\r\n                                color: theme.palette.secondary.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={onSaveWorkflowClick}\r\n                    >\r\n                        <IconDeviceFloppy stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n                <ButtonBase ref={settingsRef} title=\"Settings\" sx={{ borderRadius: '50%' }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.grey[300],\r\n                            color: theme.palette.grey[700],\r\n                            '&:hover': {\r\n                                background: theme.palette.grey[700],\r\n                                color: theme.palette.grey[300]\r\n                            }\r\n                        }}\r\n                        onClick={() => setSettingsOpen(!isSettingsOpen)}\r\n                    >\r\n                        <IconSettings stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n            </Box>\r\n            {workflow?.shortId && (\r\n                <Executions\r\n                    workflowShortId={workflow?.shortId}\r\n                    execution={workflow?.execution}\r\n                    executionCount={workflow?.executionCount}\r\n                    isExecutionOpen={isExecutionOpen}\r\n                    anchorEl={viewExecutionRef.current}\r\n                />\r\n            )}\r\n            <Settings\r\n                workflow={workflow}\r\n                isSettingsOpen={isSettingsOpen}\r\n                anchorEl={settingsRef.current}\r\n                onSettingsItemClick={onSettingsItemClick}\r\n                onUploadFile={onUploadFile}\r\n            />\r\n            <SaveWorkflowDialog\r\n                show={workfowDialogOpen}\r\n                dialogProps={{\r\n                    title: `Save New Workflow`,\r\n                    confirmButtonName: 'Save',\r\n                    cancelButtonName: 'Cancel'\r\n                }}\r\n                onCancel={() => setWorkfowDialogOpen(false)}\r\n                onConfirm={onConfirmSaveName}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nCanvasHeader.propTypes = {\r\n    workflow: PropTypes.object,\r\n    handleSaveFlow: PropTypes.func,\r\n    handleDeployWorkflow: PropTypes.func,\r\n    handleStopWorkflow: PropTypes.func,\r\n    handleDeleteWorkflow: PropTypes.func,\r\n    handleLoadWorkflow: PropTypes.func\r\n};\r\n\r\nexport default CanvasHeader;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    Fab,\r\n    ClickAwayListener,\r\n    Divider,\r\n    InputAdornment,\r\n    List,\r\n    ListItemButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    OutlinedInput,\r\n    Paper,\r\n    Popper,\r\n    Stack,\r\n    Typography\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\n\r\n// icons\r\nimport { IconPlus, IconSearch, IconMinus } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\n// ==============================|| ADD NODES||============================== //\r\n\r\nconst AddNodes = ({ nodesData, node }) => {\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [nodes, setNodes] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const anchorRef = useRef(null);\r\n    const prevOpen = useRef(open);\r\n\r\n    const filterSearch = (value) => {\r\n        setSearchValue(value);\r\n        setTimeout(() => {\r\n            if (value) {\r\n                const returnData = nodesData.filter((nd) => nd.name.toLowerCase().includes(value.toLowerCase()));\r\n                setNodes(returnData);\r\n            } else if (value === '') {\r\n                setNodes(nodesData);\r\n            }\r\n        }, 500);\r\n    };\r\n\r\n    const handleClose = (event) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        setOpen((prevOpen) => !prevOpen);\r\n    };\r\n\r\n    const onDragStart = (event, node) => {\r\n        event.dataTransfer.setData('application/reactflow', JSON.stringify(node));\r\n        event.dataTransfer.effectAllowed = 'move';\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (prevOpen.current === true && open === false) {\r\n            anchorRef.current.focus();\r\n        }\r\n\r\n        prevOpen.current = open;\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        if (node) setOpen(false);\r\n    }, [node]);\r\n\r\n    useEffect(() => {\r\n        if (nodesData) setNodes(nodesData);\r\n    }, [nodesData]);\r\n\r\n    return (\r\n        <>\r\n            <Fab\r\n                sx={{ left: 20, top: 20 }}\r\n                ref={anchorRef}\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                aria-label=\"add\"\r\n                title=\"Add Node\"\r\n                onClick={handleToggle}\r\n            >\r\n                {open ? <IconMinus /> : <IconPlus />}\r\n            </Fab>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorRef.current}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [-40, 14]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{ zIndex: 1000 }}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <Stack>\r\n                                            <Typography variant=\"h4\">Add Nodes</Typography>\r\n                                        </Stack>\r\n                                        <OutlinedInput\r\n                                            sx={{ width: '100%', pr: 1, pl: 2, my: 2 }}\r\n                                            id=\"input-search-node\"\r\n                                            value={searchValue}\r\n                                            onChange={(e) => filterSearch(e.target.value)}\r\n                                            placeholder=\"Search nodes\"\r\n                                            startAdornment={\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <IconSearch stroke={1.5} size=\"1rem\" color={theme.palette.grey[500]} />\r\n                                                </InputAdornment>\r\n                                            }\r\n                                            aria-describedby=\"search-helper-text\"\r\n                                            inputProps={{\r\n                                                'aria-label': 'weight'\r\n                                            }}\r\n                                        />\r\n                                        <Divider />\r\n                                    </Box>\r\n                                    <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                        <Box sx={{ p: 2 }}>\r\n                                            <List\r\n                                                sx={{\r\n                                                    width: '100%',\r\n                                                    maxWidth: 330,\r\n                                                    py: 0,\r\n                                                    borderRadius: '10px',\r\n                                                    [theme.breakpoints.down('md')]: {\r\n                                                        maxWidth: 300\r\n                                                    },\r\n                                                    '& .MuiListItemSecondaryAction-root': {\r\n                                                        top: 22\r\n                                                    },\r\n                                                    '& .MuiDivider-root': {\r\n                                                        my: 0\r\n                                                    },\r\n                                                    '& .list-container': {\r\n                                                        pl: 7\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {nodes.map((node) => (\r\n                                                    <div key={node.name} onDragStart={(event) => onDragStart(event, node)} draggable>\r\n                                                        <ListItemButton\r\n                                                            sx={{ p: 0, borderRadius: `${customization.borderRadius}px`, cursor: 'move' }}\r\n                                                        >\r\n                                                            <ListItem alignItems=\"center\">\r\n                                                                <ListItemAvatar>\r\n                                                                    <div\r\n                                                                        style={{\r\n                                                                            width: 50,\r\n                                                                            height: 50,\r\n                                                                            borderRadius: '50%',\r\n                                                                            backgroundColor: 'white'\r\n                                                                        }}\r\n                                                                    >\r\n                                                                        <img\r\n                                                                            style={{\r\n                                                                                width: '100%',\r\n                                                                                height: '100%',\r\n                                                                                padding: 10,\r\n                                                                                objectFit: 'contain'\r\n                                                                            }}\r\n                                                                            alt={node.name}\r\n                                                                            src={`${baseURL}/api/v1/node-icon/${node.name}`}\r\n                                                                        />\r\n                                                                    </div>\r\n                                                                </ListItemAvatar>\r\n                                                                <ListItemText\r\n                                                                    sx={{ ml: 1 }}\r\n                                                                    primary={node.label}\r\n                                                                    secondary={node.description}\r\n                                                                />\r\n                                                            </ListItem>\r\n                                                        </ListItemButton>\r\n                                                        <Divider />\r\n                                                    </div>\r\n                                                ))}\r\n                                            </List>\r\n                                        </Box>\r\n                                    </PerfectScrollbar>\r\n                                </MainCard>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nAddNodes.propTypes = {\r\n    nodesData: PropTypes.array,\r\n    node: PropTypes.object\r\n};\r\n\r\nexport default AddNodes;\r\n","import client from './client';\r\n\r\nconst getAllNodes = () => client.get('/nodes');\r\n\r\nconst getSpecificNode = (name) => client.get(`/nodes/${name}`);\r\n\r\nconst testNode = (name, body) => client.post(`/node-test/${name}`, body); //body: ITestNodeBody\r\n\r\nconst loadMethodNode = (name, nodeData) => client.post(`/node-load-method/${name}`, nodeData); //nodeData: INodeData\r\n\r\nconst removeTestTriggers = () => client.post(`/remove-test-triggers`);\r\n\r\nexport default {\r\n    getAllNodes,\r\n    getSpecificNode,\r\n    testNode,\r\n    loadMethodNode,\r\n    removeTestTriggers\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { Box, Button, Chip, CircularProgress, Stack, Typography, IconButton } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// third party\r\nimport ReactJson from 'react-json-view';\r\nimport socketIOClient from 'socket.io-client';\r\n\r\n// project imports\r\nimport AnimateButton from 'ui-component/extended/AnimateButton';\r\nimport AttachmentDialog from 'ui-component/dialog/AttachmentDialog';\r\nimport HTMLDialog from 'ui-component/dialog/HTMLDialog';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// API\r\nimport nodesApi from 'api/nodes';\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi';\r\n\r\n// icons\r\nimport { IconExclamationMark, IconCopy, IconArrowUpRightCircle, IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\n// utils\r\nimport { copyToClipboard } from 'utils/genericHelper';\r\n\r\n// ==============================|| OUTPUT RESPONSES ||============================== //\r\n\r\nconst OutputResponses = ({ nodeId, nodeParamsType, nodeFlowData, nodes, edges, workflow, onSubmit }) => {\r\n    const theme = useTheme();\r\n\r\n    const [outputResponse, setOutputResponse] = useState([]);\r\n    const [errorResponse, setErrorResponse] = useState(null);\r\n    const [nodeName, setNodeName] = useState(null);\r\n    const [nodeType, setNodeType] = useState(null);\r\n    const [nodeLabel, setNodeLabel] = useState(null);\r\n    const [isTestNodeBtnDisabled, disableTestNodeBtn] = useState(true);\r\n    const [testNodeLoading, setTestNodeLoading] = useState(null);\r\n    const [showHTMLDialog, setShowHTMLDialog] = useState(false);\r\n    const [HTMLDialogProps, setHTMLDialogProps] = useState({});\r\n    const [showAttachmentDialog, setShowAttachmentDialog] = useState(false);\r\n    const [attachmentDialogProps, setAttachmentDialogProps] = useState({});\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const testNodeApi = useApi(nodesApi.testNode);\r\n\r\n    const onTestNodeClick = (nodeType) => {\r\n        /* If workflow is already deployed, stop it first to be safe.\r\n         *  Because it could cause throttled calls\r\n         */\r\n        if (workflow.deployed) {\r\n            setTestNodeLoading(false);\r\n            alert('Testing trigger requires stopping workflow. Please stop workflow first');\r\n            return;\r\n        }\r\n\r\n        const testNodeBody = {\r\n            nodes,\r\n            edges,\r\n            nodeId\r\n        };\r\n\r\n        try {\r\n            setTestNodeLoading(true);\r\n\r\n            if (nodeType === 'webhook') {\r\n                const socket = socketIOClient(baseURL);\r\n\r\n                socket.on('connect', async () => {\r\n                    testNodeBody.clientId = socket.id;\r\n                    testNodeApi.request(nodeFlowData.name, testNodeBody);\r\n                });\r\n\r\n                socket.on('testWebhookNodeResponse', (data) => {\r\n                    setOutputResponse(data);\r\n                    setTestNodeLoading(false);\r\n                    const formValues = {\r\n                        submit: true,\r\n                        needRetest: null,\r\n                        output: data\r\n                    };\r\n                    onSubmit(formValues, 'outputResponses');\r\n                    socket.disconnect();\r\n                });\r\n            } else {\r\n                testNodeApi.request(nodeFlowData.name, testNodeBody);\r\n            }\r\n        } catch (error) {\r\n            setTestNodeLoading(false);\r\n            setOutputResponse([]);\r\n            setErrorResponse(error);\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const checkIfTestNodeValid = () => {\r\n        const paramsTypes = nodeParamsType.filter((type) => type !== 'outputResponses');\r\n        for (let i = 0; i < paramsTypes.length; i += 1) {\r\n            const paramType = paramsTypes[i];\r\n\r\n            if (!nodeFlowData[paramType] || !nodeFlowData[paramType].submit) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const openAttachmentDialog = (outputResponse) => {\r\n        const dialogProp = {\r\n            title: 'Attachments',\r\n            executionData: outputResponse\r\n        };\r\n        setAttachmentDialogProps(dialogProp);\r\n        setShowAttachmentDialog(true);\r\n    };\r\n\r\n    const openHTMLDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'HTML',\r\n            executionData\r\n        };\r\n        setHTMLDialogProps(dialogProp);\r\n        setShowHTMLDialog(true);\r\n    };\r\n\r\n    const onExpandDialogClicked = (executionData) => {\r\n        const dialogProp = {\r\n            title: `Output Responses: ${nodeLabel} `,\r\n            data: executionData\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (nodeFlowData && nodeFlowData.outputResponses && nodeFlowData.outputResponses.output) {\r\n            setOutputResponse(nodeFlowData.outputResponses.output);\r\n        } else {\r\n            setOutputResponse([]);\r\n        }\r\n\r\n        disableTestNodeBtn(checkIfTestNodeValid());\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [nodeFlowData, nodeParamsType]);\r\n\r\n    useEffect(() => {\r\n        if (nodes && nodeId) {\r\n            const selectedNode = nodes.find((nd) => nd.id === nodeId);\r\n            if (selectedNode) {\r\n                setNodeName(selectedNode.data.name);\r\n                setNodeType(selectedNode.data.type);\r\n                setNodeLabel(selectedNode.data.label);\r\n            }\r\n        }\r\n    }, [nodes, nodeId]);\r\n\r\n    // Test node successful\r\n    useEffect(() => {\r\n        if (testNodeApi.data && nodeType && nodeType !== 'webhook') {\r\n            const testNodeData = testNodeApi.data;\r\n            setOutputResponse(testNodeData);\r\n            setErrorResponse(null);\r\n            const formValues = {\r\n                submit: true,\r\n                needRetest: null,\r\n                output: testNodeData\r\n            };\r\n            onSubmit(formValues, 'outputResponses');\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.data]);\r\n\r\n    // Test node error\r\n    useEffect(() => {\r\n        if (testNodeApi.error && nodeType && nodeType !== 'webhook') {\r\n            let errorMessage = 'Unexpected Error.';\r\n\r\n            if (testNodeApi.error.response && testNodeApi.error.response.data) {\r\n                errorMessage = testNodeApi.error.response.data;\r\n            } else if (testNodeApi.error.message) {\r\n                errorMessage = testNodeApi.error.message;\r\n            }\r\n\r\n            setErrorResponse(errorMessage);\r\n            setOutputResponse([]);\r\n            const formValues = {\r\n                submit: null,\r\n                needRetest: null,\r\n                output: []\r\n            };\r\n            onSubmit(formValues, 'outputResponses');\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.error]);\r\n\r\n    // Test node loading\r\n    useEffect(() => {\r\n        if (nodeType && nodeType !== 'webhook') setTestNodeLoading(testNodeApi.loading);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.loading]);\r\n\r\n    return (\r\n        <>\r\n            <Box sx={{ width: 400 }}>\r\n                {nodeFlowData && nodeFlowData.outputResponses && nodeFlowData.outputResponses.needRetest && (\r\n                    <Chip sx={{ mb: 2 }} icon={<IconExclamationMark />} label=\"Retest the node for updated parameters\" color=\"warning\" />\r\n                )}\r\n                {nodeName && nodeName === 'webhook' && (\r\n                    <Box sx={{ mb: 3 }}>\r\n                        <Typography variant=\"h5\" sx={{ mb: 1 }}>{`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`}</Typography>\r\n                        <Stack direction=\"row\" spacing={2}>\r\n                            <Button\r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                startIcon={<IconCopy />}\r\n                                onClick={() => navigator.clipboard.writeText(`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`)}\r\n                            >\r\n                                Copy URL\r\n                            </Button>\r\n                            <Button\r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                startIcon={<IconArrowUpRightCircle />}\r\n                                onClick={() => window.open(`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`, '_blank')}\r\n                            >\r\n                                Open in New Tab\r\n                            </Button>\r\n                        </Stack>\r\n                    </Box>\r\n                )}\r\n                {errorResponse && (\r\n                    <Box sx={{ mb: 2 }}>\r\n                        <Chip sx={{ mb: 2 }} icon={<IconX />} label=\"Error\" color=\"error\" />\r\n                        <div style={{ color: 'red' }}>{errorResponse}</div>\r\n                    </Box>\r\n                )}\r\n                <Box sx={{ position: 'relative' }}>\r\n                    <ReactJson collapsed src={outputResponse} enableClipboard={(e) => copyToClipboard(e)} />\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        sx={{\r\n                            height: 25,\r\n                            width: 25,\r\n                            position: 'absolute',\r\n                            top: -5,\r\n                            right: 5\r\n                        }}\r\n                        title=\"Expand Data\"\r\n                        color=\"primary\"\r\n                        onClick={() => onExpandDialogClicked(outputResponse)}\r\n                    >\r\n                        <IconArrowsMaximize />\r\n                    </IconButton>\r\n                    <div>\r\n                        {outputResponse.map((respObj, respObjIndex) => (\r\n                            <div key={respObjIndex}>\r\n                                {respObj.html && (\r\n                                    <Typography sx={{ p: 1, mt: 2 }} variant=\"h5\">\r\n                                        HTML\r\n                                    </Typography>\r\n                                )}\r\n                                {respObj.html && (\r\n                                    <div\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            height: '100%',\r\n                                            maxHeight: 400,\r\n                                            overflow: 'auto',\r\n                                            backgroundColor: 'white',\r\n                                            borderRadius: 5\r\n                                        }}\r\n                                        dangerouslySetInnerHTML={{ __html: respObj.html }}\r\n                                    />\r\n                                )}\r\n                                {respObj.html && (\r\n                                    <Button sx={{ mt: 1 }} size=\"small\" variant=\"contained\" onClick={() => openHTMLDialog(outputResponse)}>\r\n                                        View HTML\r\n                                    </Button>\r\n                                )}\r\n\r\n                                {respObj.attachments && (\r\n                                    <Typography sx={{ p: 1, mt: 2, pb: 0 }} variant=\"h5\">\r\n                                        Attachments\r\n                                    </Typography>\r\n                                )}\r\n                                {respObj.attachments &&\r\n                                    respObj.attachments.map((attachment, attchIndex) => (\r\n                                        <div key={attchIndex}>\r\n                                            <Typography sx={{ p: 1 }} variant=\"h6\">\r\n                                                Item {respObjIndex} |{' '}\r\n                                                {attachment.filename ? attachment.filename : `Attachment ${attchIndex}`}\r\n                                            </Typography>\r\n                                            <embed\r\n                                                src={attachment.content}\r\n                                                width=\"100%\"\r\n                                                height=\"100%\"\r\n                                                style={{ borderStyle: 'solid' }}\r\n                                                type={attachment.contentType}\r\n                                            />\r\n                                            <Button size=\"small\" variant=\"contained\" onClick={() => openAttachmentDialog(outputResponse)}>\r\n                                                View Attachment\r\n                                            </Button>\r\n                                        </div>\r\n                                    ))}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </Box>\r\n                <Box sx={{ mt: 2, position: 'relative' }}>\r\n                    <AnimateButton>\r\n                        <Button\r\n                            disableElevation\r\n                            disabled={isTestNodeBtnDisabled || testNodeLoading}\r\n                            fullWidth\r\n                            size=\"large\"\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            onClick={() => onTestNodeClick(nodeType)}\r\n                        >\r\n                            Test Node\r\n                        </Button>\r\n                    </AnimateButton>\r\n                    {testNodeLoading && (\r\n                        <CircularProgress\r\n                            size={24}\r\n                            sx={{\r\n                                color: theme.palette.secondary.main,\r\n                                position: 'absolute',\r\n                                top: '50%',\r\n                                left: '50%',\r\n                                marginTop: '-12px',\r\n                                marginLeft: '-12px'\r\n                            }}\r\n                        />\r\n                    )}\r\n                </Box>\r\n            </Box>\r\n            <AttachmentDialog\r\n                show={showAttachmentDialog}\r\n                dialogProps={attachmentDialogProps}\r\n                onCancel={() => setShowAttachmentDialog(false)}\r\n            ></AttachmentDialog>\r\n            <HTMLDialog show={showHTMLDialog} dialogProps={HTMLDialogProps} onCancel={() => setShowHTMLDialog(false)}></HTMLDialog>\r\n            <ExpandDataDialog\r\n                show={showExpandDialog}\r\n                dialogProps={expandDialogProps}\r\n                onCancel={() => setShowExpandDialog(false)}\r\n            ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nOutputResponses.propTypes = {\r\n    nodeId: PropTypes.string,\r\n    nodeParamsType: PropTypes.array,\r\n    nodeFlowData: PropTypes.object,\r\n    nodes: PropTypes.array,\r\n    edges: PropTypes.array,\r\n    workflow: PropTypes.object,\r\n    onSubmit: PropTypes.func\r\n};\r\n\r\nexport default OutputResponses;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport { Box, Fab, List, Accordion, AccordionSummary, AccordionDetails, Paper, Popper, Stack, Typography, IconButton } from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport ReactJson from 'react-json-view';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// icons\r\nimport { IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// ==============================|| VARIABLE SELECTOR ||============================== //\r\n\r\nconst isPositiveNumeric = (value) => /^\\d+$/.test(value);\r\n\r\nconst VariableSelector = ({ nodes, isVariableSelectorOpen, anchorEl, onVariableSelected, handleClose }) => {\r\n    const theme = useTheme();\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const varPrevOpen = useRef(open);\r\n\r\n    const handleAccordionChange = (nodeLabel) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? nodeLabel : false);\r\n    };\r\n\r\n    const onClipboardCopy = (e, node) => {\r\n        const namespaces = e.namespace;\r\n        let returnVariablePath = `${node.id}`;\r\n        for (let i = 0; i < namespaces.length; i += 1) {\r\n            const namespace = namespaces[i];\r\n            if (namespace !== 'root') {\r\n                if (isPositiveNumeric(namespace)) {\r\n                    if (returnVariablePath.endsWith('.')) {\r\n                        returnVariablePath = returnVariablePath.substring(0, returnVariablePath.length - 1);\r\n                    }\r\n                    returnVariablePath += `[${namespace}]`;\r\n                } else {\r\n                    returnVariablePath += namespace;\r\n                }\r\n                if (i !== namespaces.length - 1) {\r\n                    returnVariablePath += '.';\r\n                }\r\n            }\r\n        }\r\n        onVariableSelected(returnVariablePath);\r\n    };\r\n\r\n    const onExpandDialogClicked = (data, node) => {\r\n        const dialogProp = {\r\n            title: `Variable Data: ${node.data.label}`,\r\n            data,\r\n            node\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    // Handle Accordian\r\n    useEffect(() => {\r\n        varPrevOpen.current = open;\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        setOpen(isVariableSelectorOpen);\r\n    }, [isVariableSelectorOpen]);\r\n\r\n    return (\r\n        <>\r\n            <Popper\r\n                placement=\"right-start\"\r\n                open={open}\r\n                role={undefined}\r\n                transition\r\n                anchorEl={anchorEl}\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [55, 350]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{ zIndex: 900, width: 350 }}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <Fab\r\n                                sx={{\r\n                                    minHeight: 30,\r\n                                    height: 30,\r\n                                    width: 30,\r\n                                    backgroundColor: theme.palette.secondary.light,\r\n                                    color: theme.palette.secondary.main,\r\n                                    position: 'absolute',\r\n                                    right: -10,\r\n                                    top: -10\r\n                                }}\r\n                                size=\"small\"\r\n                                onClick={handleClose}\r\n                            >\r\n                                <IconX />\r\n                            </Fab>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <Box sx={{ p: 2 }}>\r\n                                    <Stack>\r\n                                        <Typography variant=\"h4\">Variable Selector</Typography>\r\n                                    </Stack>\r\n                                </Box>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                    {nodes && nodes.length === 0 && <Box sx={{ p: 2 }}>No variables</Box>}\r\n\r\n                                    {nodes && nodes.length > 0 && (\r\n                                        <Box sx={{ p: 2 }}>\r\n                                            <List\r\n                                                sx={{\r\n                                                    width: '100%',\r\n                                                    maxWidth: 330,\r\n                                                    py: 0,\r\n                                                    borderRadius: '10px',\r\n                                                    [theme.breakpoints.down('md')]: {\r\n                                                        maxWidth: 300\r\n                                                    },\r\n                                                    '& .MuiListItemSecondaryAction-root': {\r\n                                                        top: 22\r\n                                                    },\r\n                                                    '& .MuiDivider-root': {\r\n                                                        my: 0\r\n                                                    },\r\n                                                    '& .list-container': {\r\n                                                        pl: 7\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {nodes.map((node, index) => (\r\n                                                    <Box key={index}>\r\n                                                        <Accordion\r\n                                                            expanded={expanded === node.data.label}\r\n                                                            onChange={handleAccordionChange(node.data.label)}\r\n                                                        >\r\n                                                            <AccordionSummary\r\n                                                                expandIcon={<ExpandMoreIcon />}\r\n                                                                aria-controls={`${node.data.label}-content`}\r\n                                                                id={`${node.data.label}-header`}\r\n                                                            >\r\n                                                                <Typography variant=\"h5\">{node.data.label}</Typography>\r\n                                                            </AccordionSummary>\r\n                                                            <AccordionDetails>\r\n                                                                <div style={{ position: 'relative' }}>\r\n                                                                    <ReactJson\r\n                                                                        collapsed\r\n                                                                        src={\r\n                                                                            node.data.outputResponses && node.data.outputResponses.output\r\n                                                                                ? node.data.outputResponses.output\r\n                                                                                : {}\r\n                                                                        }\r\n                                                                        enableClipboard={(e) => onClipboardCopy(e, node)}\r\n                                                                    />\r\n                                                                    <IconButton\r\n                                                                        size=\"small\"\r\n                                                                        sx={{\r\n                                                                            height: 25,\r\n                                                                            width: 25,\r\n                                                                            position: 'absolute',\r\n                                                                            top: -5,\r\n                                                                            right: 5\r\n                                                                        }}\r\n                                                                        title=\"Expand Variable\"\r\n                                                                        color=\"primary\"\r\n                                                                        onClick={() =>\r\n                                                                            onExpandDialogClicked(\r\n                                                                                node.data.outputResponses &&\r\n                                                                                    node.data.outputResponses.output\r\n                                                                                    ? node.data.outputResponses.output\r\n                                                                                    : {},\r\n                                                                                node\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <IconArrowsMaximize />\r\n                                                                    </IconButton>\r\n                                                                </div>\r\n                                                            </AccordionDetails>\r\n                                                        </Accordion>\r\n                                                    </Box>\r\n                                                ))}\r\n                                            </List>\r\n                                        </Box>\r\n                                    )}\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n            <ExpandDataDialog\r\n                enableClipboard\r\n                show={showExpandDialog}\r\n                dialogProps={expandDialogProps}\r\n                onCancel={() => setShowExpandDialog(false)}\r\n                onCopyClick={(e, node) => {\r\n                    onClipboardCopy(e, node);\r\n                    setShowExpandDialog(false);\r\n                }}\r\n            ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nVariableSelector.propTypes = {\r\n    nodes: PropTypes.array,\r\n    isVariableSelectorOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any,\r\n    onVariableSelected: PropTypes.func,\r\n    handleClose: PropTypes.func\r\n};\r\n\r\nexport default VariableSelector;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport {\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    Box,\r\n    Fab,\r\n    ClickAwayListener,\r\n    Divider,\r\n    Paper,\r\n    Stack,\r\n    Popper,\r\n    Typography,\r\n    TextField,\r\n    Avatar\r\n} from '@mui/material';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport * as Yup from 'yup';\r\nimport lodash from 'lodash';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport InputParameters from 'views/inputs/InputParameters';\r\nimport CredentialInput from 'views/inputs/CredentialInput';\r\nimport OutputResponses from 'views/output/OutputResponses';\r\nimport VariableSelector from './VariableSelector';\r\nimport EditVariableDialog from 'ui-component/dialog/EditVariableDialog';\r\n\r\n// API\r\nimport nodesApi from 'api/nodes';\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi';\r\n\r\n// icons\r\nimport { IconPencil, IconMinus, IconCheck } from '@tabler/icons';\r\n\r\n// utils\r\nimport { getAvailableNodeIdsForVariable, numberOrExpressionRegex, handleCredentialParams } from 'utils/genericHelper';\r\n\r\n// ==============================|| EDIT NODES||============================== //\r\n\r\nconst EditNodes = ({ node, nodes, edges, workflow, onNodeLabelUpdate, onNodeValuesUpdate }) => {\r\n    const theme = useTheme();\r\n\r\n    const [nodeFlowData, setNodeFlowData] = useState(null);\r\n    const [nodeLabel, setNodeLabel] = useState('');\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [nodeDetails, setNodeDetails] = useState(null);\r\n    const [nodeParams, setNodeParams] = useState([]);\r\n    const [nodeParamsType, setNodeParamsType] = useState([]);\r\n    const [nodeParamsInitialValues, setNodeParamsInitialValues] = useState({});\r\n    const [nodeParamsValidation, setNodeParamsValidation] = useState({});\r\n    const [isVariableSelectorOpen, setVariableSelectorOpen] = useState(false);\r\n    const [variableBody, setVariableBody] = useState({});\r\n    const [availableNodesForVariable, setAvailableNodesForVariable] = useState(null);\r\n    const [isEditVariableDialogOpen, setEditVariableDialog] = useState(false);\r\n    const [editVariableDialogProps, setEditVariableDialogProps] = useState({});\r\n\r\n    const anchorRef = useRef(null);\r\n    const ps = useRef();\r\n\r\n    const getSpecificNodeApi = useApi(nodesApi.getSpecificNode);\r\n\r\n    const scrollTop = () => {\r\n        const curr = ps.current;\r\n        if (curr) {\r\n            curr.scrollTop = 0;\r\n        }\r\n    };\r\n\r\n    const handleClose = (event) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n        setVariableSelectorOpen(false);\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        setOpen((prevOpen) => !prevOpen);\r\n        if (open) setVariableSelectorOpen(false);\r\n    };\r\n\r\n    const handleAccordionChange = (paramsType) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? paramsType : false);\r\n        scrollTop();\r\n    };\r\n\r\n    const handleNodeLabelChange = (event) => {\r\n        setNodeLabel(event.target.value);\r\n    };\r\n\r\n    const saveNodeLabel = () => {\r\n        onNodeLabelUpdate(nodeLabel);\r\n    };\r\n\r\n    const onEditVariableDialogOpen = (input, values, arrayItemBody) => {\r\n        const variableNodesIds = getAvailableNodeIdsForVariable(nodes, edges, node.id);\r\n\r\n        const nodesForVariable = [];\r\n        for (let i = 0; i < variableNodesIds.length; i += 1) {\r\n            const nodeId = variableNodesIds[i];\r\n            const node = nodes.find((nd) => nd.id === nodeId);\r\n            nodesForVariable.push(node);\r\n        }\r\n\r\n        const dialogProps = {\r\n            input,\r\n            values,\r\n            arrayItemBody,\r\n            availableNodesForVariable: nodesForVariable,\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Save'\r\n        };\r\n\r\n        setEditVariableDialogProps(dialogProps);\r\n        setEditVariableDialog(true);\r\n    };\r\n\r\n    const setVariableSelectorState = (variableSelectorState, body) => {\r\n        setVariableSelectorOpen(variableSelectorState);\r\n        if (body) {\r\n            setVariableBody(body);\r\n            const variableNodesIds = getAvailableNodeIdsForVariable(nodes, edges, node.id);\r\n\r\n            const nodesForVariable = [];\r\n            for (let i = 0; i < variableNodesIds.length; i += 1) {\r\n                const nodeId = variableNodesIds[i];\r\n                const node = nodes.find((nd) => nd.id === nodeId);\r\n                nodesForVariable.push(node);\r\n            }\r\n            setAvailableNodesForVariable(nodesForVariable);\r\n        }\r\n    };\r\n\r\n    const paramsChanged = (formParams, paramsType) => {\r\n        // Because formParams options can be changed due to show hide options,\r\n        // To avoid that, replace with original details options\r\n\r\n        const credentialMethodParam = formParams.find((param) => param.name === 'credentialMethod');\r\n        const credentialMethodParamIndex = formParams.findIndex((param) => param.name === 'credentialMethod');\r\n\r\n        if (credentialMethodParam !== undefined) {\r\n            const originalParam = nodeDetails[paramsType].find((param) => param.name === 'credentialMethod');\r\n            if (originalParam !== undefined) {\r\n                formParams[credentialMethodParamIndex]['options'] = originalParam.options;\r\n            }\r\n        }\r\n\r\n        const updateNodeDetails = {\r\n            ...nodeDetails,\r\n            [paramsType]: formParams\r\n        };\r\n        setNodeDetails(updateNodeDetails);\r\n    };\r\n\r\n    const valueChanged = (formValues, paramsType) => {\r\n        const updateNodeFlowData = {\r\n            ...nodeFlowData,\r\n            [paramsType]: formValues\r\n        };\r\n        // If input parameters change, notify output has to be retest\r\n        if (nodeFlowData.outputResponses) {\r\n            const outputResponsesFlowData = nodeFlowData.outputResponses;\r\n            outputResponsesFlowData.submit = null;\r\n            outputResponsesFlowData.needRetest = true;\r\n            updateNodeFlowData.outputResponses = outputResponsesFlowData;\r\n        }\r\n\r\n        setNodeFlowData(updateNodeFlowData);\r\n        onNodeValuesUpdate(updateNodeFlowData);\r\n    };\r\n\r\n    const onVariableSelected = (returnVariablePath) => {\r\n        if (variableBody) {\r\n            const path = variableBody.path;\r\n            const paramsType = variableBody.paramsType;\r\n            const newInput = `${variableBody.textBeforeCursorPosition}{{${returnVariablePath}}}${variableBody.textAfterCursorPosition}`;\r\n            const clonedNodeFlowData = lodash.cloneDeep(nodeFlowData);\r\n            lodash.set(clonedNodeFlowData, path, newInput);\r\n            valueChanged(clonedNodeFlowData[paramsType], paramsType);\r\n        }\r\n    };\r\n\r\n    const onSubmit = (formValues, paramsType) => {\r\n        const updateNodeFlowData = {\r\n            ...nodeFlowData,\r\n            [paramsType]: formValues\r\n        };\r\n        setNodeFlowData(updateNodeFlowData);\r\n        onNodeValuesUpdate(updateNodeFlowData);\r\n\r\n        const index = nodeParamsType.indexOf(paramsType);\r\n        if (index >= 0 && index !== nodeParamsType.length - 1) {\r\n            setExpanded(nodeParamsType[index + 1]);\r\n            scrollTop();\r\n        }\r\n    };\r\n\r\n    const showHideParameters = (input, displayType, index, toBeDeleteParams) => {\r\n        const displayOptions = input[displayType];\r\n        Object.keys(displayOptions).forEach((path) => {\r\n            const comparisonValue = displayOptions[path];\r\n            if (path.includes('$index')) {\r\n                path = path.replace('$index', index);\r\n            }\r\n            const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n            if (Array.isArray(comparisonValue)) {\r\n                if (displayType === 'show' && !comparisonValue.includes(groundValue)) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n                if (displayType === 'hide' && comparisonValue.includes(groundValue)) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n            } else if (typeof comparisonValue === 'string') {\r\n                if (displayType === 'show' && !(comparisonValue === groundValue || new RegExp(comparisonValue).test(groundValue))) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n                if (displayType === 'hide' && (comparisonValue === groundValue || new RegExp(comparisonValue).test(groundValue))) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    const displayParameters = (params, paramsType, arrayIndex) => {\r\n        const toBeDeleteParams = [];\r\n\r\n        for (let i = 0; i < params.length; i += 1) {\r\n            const input = params[i];\r\n\r\n            if (input.type === 'array') {\r\n                const arrayInitialValue = lodash.get(nodeFlowData, `${paramsType}.${input.name}`, []);\r\n                const inputArray = [];\r\n                for (let j = arrayIndex; j < arrayInitialValue.length; j += 1) {\r\n                    inputArray.push(displayParameters(input.array || [], paramsType, j));\r\n                }\r\n                input.arrayParams = inputArray;\r\n            }\r\n            if (input.show) {\r\n                showHideParameters(input, 'show', arrayIndex, toBeDeleteParams);\r\n            }\r\n            if (input.hide) {\r\n                showHideParameters(input, 'hide', arrayIndex, toBeDeleteParams);\r\n            }\r\n        }\r\n\r\n        let returnParams = params;\r\n        for (let i = 0; i < toBeDeleteParams.length; i += 1) {\r\n            returnParams = returnParams.filter((prm) => JSON.stringify(prm) !== JSON.stringify(toBeDeleteParams[i]));\r\n        }\r\n        return returnParams;\r\n    };\r\n\r\n    const showHideOptions = (displayType, index, options) => {\r\n        let returnOptions = options;\r\n        const toBeDeleteOptions = [];\r\n\r\n        for (let i = 0; i < returnOptions.length; i += 1) {\r\n            const option = returnOptions[i];\r\n            const displayOptions = option[displayType];\r\n            if (displayOptions) {\r\n                Object.keys(displayOptions).forEach((path) => {\r\n                    const comparisonValue = displayOptions[path];\r\n\r\n                    if (path.includes('$index')) {\r\n                        path = path.replace('$index', index);\r\n                    }\r\n                    const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n                    if (Array.isArray(comparisonValue)) {\r\n                        if (displayType === 'show' && !comparisonValue.includes(groundValue)) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                        if (displayType === 'hide' && comparisonValue.includes(groundValue)) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                    } else if (typeof comparisonValue === 'string') {\r\n                        if (displayType === 'show' && !(comparisonValue === groundValue || new RegExp(comparisonValue).test(groundValue))) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                        if (displayType === 'hide' && (comparisonValue === groundValue || new RegExp(comparisonValue).test(groundValue))) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < toBeDeleteOptions.length; i += 1) {\r\n            returnOptions = returnOptions.filter((opt) => JSON.stringify(opt) !== JSON.stringify(toBeDeleteOptions[i]));\r\n        }\r\n\r\n        return returnOptions;\r\n    };\r\n\r\n    const displayOptions = (params, paramsType, arrayIndex) => {\r\n        let clonedParams = params;\r\n\r\n        for (let i = 0; i < clonedParams.length; i += 1) {\r\n            const input = clonedParams[i];\r\n\r\n            if (input.type === 'array') {\r\n                const arrayInitialValue = lodash.get(nodeFlowData, `${paramsType}.${input.name}`, []);\r\n                const inputArray = [];\r\n                for (let j = arrayIndex; j < arrayInitialValue.length; j += 1) {\r\n                    inputArray.push(displayOptions(input.arrayParams[j] || [], paramsType, j));\r\n                }\r\n                input.arrayParams = inputArray;\r\n            }\r\n\r\n            if (input.type === 'options') {\r\n                input.options = showHideOptions('show', arrayIndex, input.options);\r\n                input.options = showHideOptions('hide', arrayIndex, input.options);\r\n            }\r\n        }\r\n\r\n        return clonedParams;\r\n    };\r\n\r\n    const setYupValidation = (params) => {\r\n        const validationSchema = {};\r\n        for (let i = 0; i < params.length; i += 1) {\r\n            const input = params[i];\r\n            let inputOptional = input.optional;\r\n\r\n            if (typeof input.optional === 'object' && input.optional !== null) {\r\n                const keys = Object.keys(input.optional);\r\n                inputOptional = true;\r\n                for (let j = 0; j < keys.length; j += 1) {\r\n                    const path = keys[j];\r\n                    const comparisonValue = input.optional[path];\r\n                    const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n                    if (Array.isArray(comparisonValue)) {\r\n                        inputOptional = inputOptional && comparisonValue.includes(groundValue);\r\n                    } else if (typeof comparisonValue === 'string') {\r\n                        inputOptional = inputOptional && (comparisonValue === groundValue || new RegExp(comparisonValue).test(groundValue));\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (\r\n                (input.type === 'string' ||\r\n                    input.type === 'password' ||\r\n                    input.type === 'date' ||\r\n                    input.type === 'code' ||\r\n                    input.type === 'json' ||\r\n                    input.type === 'file' ||\r\n                    input.type === 'options' ||\r\n                    input.type === 'asyncOptions') &&\r\n                !inputOptional\r\n            ) {\r\n                validationSchema[input.name] = Yup.string().required(`${input.label} is required. Type: ${input.type}`);\r\n            } else if (input.type === 'number' && !inputOptional) {\r\n                validationSchema[input.name] = Yup.string()\r\n                    .required(`${input.label} is required. Type: ${input.type}`)\r\n                    .matches(numberOrExpressionRegex, `${input.label} must be numbers or a variable expression.`);\r\n            } else if (input.type === 'array' && !inputOptional) {\r\n                /*\r\n                ************\r\n                * Limitation on different object shape within array: https://github.com/jquense/yup/issues/757\r\n                ************\r\n                const innerValidationSchema = setYupValidation(input.arrayParams);\r\n                validationSchema[input.name] = Yup.array(Yup.object(innerValidationSchema)).required(`Must have ${input.label}`).min(1, `Minimum of 1 ${input.label}`);\r\n                */\r\n            }\r\n        }\r\n        return validationSchema;\r\n    };\r\n\r\n    const initializeFormValuesAndParams = (paramsType) => {\r\n        const initialValues = {};\r\n\r\n        const reorganizedParams = displayParameters(nodeDetails[paramsType] || [], paramsType, 0);\r\n        let nodeParams = displayOptions(lodash.cloneDeep(reorganizedParams), paramsType, 0);\r\n\r\n        nodeParams = handleCredentialParams(nodeParams, paramsType, reorganizedParams, nodeFlowData);\r\n\r\n        for (let i = 0; i < nodeParams.length; i += 1) {\r\n            const input = nodeParams[i];\r\n\r\n            // Load from nodeFlowData values\r\n            if (paramsType in nodeFlowData && input.name in nodeFlowData[paramsType]) {\r\n                initialValues[input.name] = nodeFlowData[paramsType][input.name];\r\n\r\n                // Check if option value is still available from the list of options\r\n                if (input.type === 'options') {\r\n                    const optionVal = input.options.find((option) => option.name === initialValues[input.name]);\r\n                    if (!optionVal) delete initialValues[input.name];\r\n                }\r\n            } else {\r\n                // Load from nodeParams default values\r\n                initialValues[input.name] = input.default || '';\r\n\r\n                // Special case for array, always initialize the item if default is not set\r\n                if (input.type === 'array' && !input.default) {\r\n                    const newObj = {};\r\n                    for (let j = 0; j < input.array.length; j += 1) {\r\n                        newObj[input.array[j].name] = input.array[j].default || '';\r\n                    }\r\n                    initialValues[input.name] = [newObj];\r\n                }\r\n            }\r\n        }\r\n\r\n        initialValues.submit = null;\r\n\r\n        setNodeParamsInitialValues(initialValues);\r\n        setNodeParamsValidation(setYupValidation(nodeParams));\r\n        setNodeParams(nodeParams);\r\n    };\r\n\r\n    // Handle Accordian\r\n    const prevOpen = useRef(open);\r\n    useEffect(() => {\r\n        if (prevOpen.current === true && open === false) {\r\n            anchorRef.current.focus();\r\n        }\r\n\r\n        prevOpen.current = open;\r\n    }, [open]);\r\n\r\n    // Get Node Details from API\r\n    useEffect(() => {\r\n        if (getSpecificNodeApi.data) {\r\n            const nodeDetails = getSpecificNodeApi.data;\r\n\r\n            setNodeDetails(nodeDetails);\r\n\r\n            const nodeParamsType = [];\r\n\r\n            if (nodeDetails.actions) nodeParamsType.push('actions');\r\n            if (nodeDetails.networks) nodeParamsType.push('networks');\r\n            if (nodeDetails.credentials) nodeParamsType.push('credentials');\r\n            if (nodeDetails.inputParameters) nodeParamsType.push('inputParameters');\r\n            nodeParamsType.push('outputResponses');\r\n\r\n            setNodeParamsType(nodeParamsType);\r\n\r\n            if (nodeParamsType.length) {\r\n                setExpanded(nodeParamsType[0]);\r\n                scrollTop();\r\n            }\r\n        }\r\n    }, [getSpecificNodeApi.data]);\r\n\r\n    // Initialization\r\n    useEffect(() => {\r\n        if (node) {\r\n            setOpen(true);\r\n            setNodeLabel(node.data.label);\r\n            setNodeFlowData(node.data);\r\n            getSpecificNodeApi.request(node.data.name);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [node]);\r\n\r\n    // Initialize Parameters Initial Values & Validation\r\n    useEffect(() => {\r\n        if (nodeDetails && nodeFlowData && expanded) {\r\n            initializeFormValuesAndParams(expanded);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [nodeDetails, nodeFlowData, expanded]);\r\n\r\n    return (\r\n        <>\r\n            <Fab sx={{ left: 40, top: 20 }} ref={anchorRef} size=\"small\" color=\"secondary\" onClick={handleToggle} title=\"Edit Node\">\r\n                {open ? <IconMinus /> : <IconPencil />}\r\n            </Fab>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorRef.current}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [-80, 14]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{ zIndex: 1000 }}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <Stack>\r\n                                            <Typography variant=\"h4\">Edit Nodes</Typography>\r\n                                        </Stack>\r\n                                    </Box>\r\n                                    <PerfectScrollbar\r\n                                        containerRef={(el) => {\r\n                                            ps.current = el;\r\n                                        }}\r\n                                        style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}\r\n                                    >\r\n                                        {!node && <Box sx={{ p: 2 }}>No data</Box>}\r\n\r\n                                        {nodeFlowData && nodeFlowData.label && (\r\n                                            <Box\r\n                                                sx={{\r\n                                                    pl: 4,\r\n                                                    pr: 4,\r\n                                                    pt: 2,\r\n                                                    pb: 2,\r\n                                                    textAlign: 'center',\r\n                                                    display: 'flex',\r\n                                                    flexDirection: 'row',\r\n                                                    alignItems: 'center'\r\n                                                }}\r\n                                            >\r\n                                                <TextField\r\n                                                    id={nodeFlowData.name}\r\n                                                    label=\"Node Label\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={nodeLabel}\r\n                                                    onChange={handleNodeLabelChange}\r\n                                                    fullWidth\r\n                                                />\r\n                                                <Fab\r\n                                                    sx={{\r\n                                                        minHeight: 10,\r\n                                                        height: 27,\r\n                                                        width: 30,\r\n                                                        backgroundColor: theme.palette.secondary.light,\r\n                                                        color: theme.palette.secondary.main,\r\n                                                        ml: 2\r\n                                                    }}\r\n                                                    size=\"small\"\r\n                                                    title=\"Validate and Save\"\r\n                                                    onClick={saveNodeLabel}\r\n                                                >\r\n                                                    <IconCheck />\r\n                                                </Fab>\r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* actions */}\r\n                                        {nodeParamsType.includes('actions') && (\r\n                                            <Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'actions'} onChange={handleAccordionChange('actions')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"actions-content\"\r\n                                                        id=\"actions-header\"\r\n                                                    >\r\n                                                        <Typography variant=\"h4\">Actions</Typography>\r\n                                                        {nodeFlowData && nodeFlowData.actions && nodeFlowData.actions.submit && (\r\n                                                            <Avatar\r\n                                                                variant=\"rounded\"\r\n                                                                sx={{\r\n                                                                    ...theme.typography.smallAvatar,\r\n                                                                    borderRadius: '50%',\r\n                                                                    background: theme.palette.success.dark,\r\n                                                                    color: 'white',\r\n                                                                    ml: 2\r\n                                                                }}\r\n                                                            >\r\n                                                                <IconCheck />\r\n                                                            </Avatar>\r\n                                                        )}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters\r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams}\r\n                                                            paramsType=\"actions\"\r\n                                                            initialValues={nodeParamsInitialValues}\r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* networks */}\r\n                                        {nodeParamsType.includes('networks') && (\r\n                                            <Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'networks'} onChange={handleAccordionChange('networks')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"networks-content\"\r\n                                                        id=\"networks-header\"\r\n                                                    >\r\n                                                        <Typography variant=\"h4\">Networks</Typography>\r\n                                                        {nodeFlowData && nodeFlowData.networks && nodeFlowData.networks.submit && (\r\n                                                            <Avatar\r\n                                                                variant=\"rounded\"\r\n                                                                sx={{\r\n                                                                    ...theme.typography.smallAvatar,\r\n                                                                    borderRadius: '50%',\r\n                                                                    background: theme.palette.success.dark,\r\n                                                                    color: 'white',\r\n                                                                    ml: 2\r\n                                                                }}\r\n                                                            >\r\n                                                                <IconCheck />\r\n                                                            </Avatar>\r\n                                                        )}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters\r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams}\r\n                                                            paramsType=\"networks\"\r\n                                                            initialValues={nodeParamsInitialValues}\r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* credentials */}\r\n                                        {nodeParamsType.includes('credentials') && (\r\n                                            <Box sx={{ p: 2 }}>\r\n                                                <Accordion\r\n                                                    expanded={expanded === 'credentials'}\r\n                                                    onChange={handleAccordionChange('credentials')}\r\n                                                >\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"credentials-content\"\r\n                                                        id=\"credentials-header\"\r\n                                                    >\r\n                                                        <Typography variant=\"h4\">Credentials</Typography>\r\n                                                        {nodeFlowData && nodeFlowData.credentials && nodeFlowData.credentials.submit && (\r\n                                                            <Avatar\r\n                                                                variant=\"rounded\"\r\n                                                                sx={{\r\n                                                                    ...theme.typography.smallAvatar,\r\n                                                                    borderRadius: '50%',\r\n                                                                    background: theme.palette.success.dark,\r\n                                                                    color: 'white',\r\n                                                                    ml: 2\r\n                                                                }}\r\n                                                            >\r\n                                                                <IconCheck />\r\n                                                            </Avatar>\r\n                                                        )}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <CredentialInput\r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            initialParams={nodeParams}\r\n                                                            paramsType=\"credentials\"\r\n                                                            initialValues={nodeParamsInitialValues}\r\n                                                            initialValidation={nodeParamsValidation}\r\n                                                            valueChanged={valueChanged}\r\n                                                            paramsChanged={paramsChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* inputParameters */}\r\n                                        {nodeParamsType.includes('inputParameters') && (\r\n                                            <Box sx={{ p: 2 }}>\r\n                                                <Accordion\r\n                                                    expanded={expanded === 'inputParameters'}\r\n                                                    onChange={handleAccordionChange('inputParameters')}\r\n                                                >\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"inputParameters-content\"\r\n                                                        id=\"inputParameters-header\"\r\n                                                    >\r\n                                                        <Typography variant=\"h4\">Input Parameters</Typography>\r\n                                                        {nodeFlowData &&\r\n                                                            nodeFlowData.inputParameters &&\r\n                                                            nodeFlowData.inputParameters.submit && (\r\n                                                                <Avatar\r\n                                                                    variant=\"rounded\"\r\n                                                                    sx={{\r\n                                                                        ...theme.typography.smallAvatar,\r\n                                                                        borderRadius: '50%',\r\n                                                                        background: theme.palette.success.dark,\r\n                                                                        color: 'white',\r\n                                                                        ml: 2\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <IconCheck />\r\n                                                                </Avatar>\r\n                                                            )}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters\r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams}\r\n                                                            paramsType=\"inputParameters\"\r\n                                                            initialValues={nodeParamsInitialValues}\r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* outputResponses */}\r\n                                        {nodeDetails && nodeFlowData && (\r\n                                            <Box sx={{ p: 2 }}>\r\n                                                <Accordion\r\n                                                    expanded={expanded === 'outputResponses'}\r\n                                                    onChange={handleAccordionChange('outputResponses')}\r\n                                                >\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"outputResponses-content\"\r\n                                                        id=\"outputResponses-header\"\r\n                                                    >\r\n                                                        <Typography variant=\"h4\">Output Responses</Typography>\r\n                                                        {nodeFlowData &&\r\n                                                            nodeFlowData.outputResponses &&\r\n                                                            nodeFlowData.outputResponses.submit && (\r\n                                                                <Avatar\r\n                                                                    variant=\"rounded\"\r\n                                                                    sx={{\r\n                                                                        ...theme.typography.smallAvatar,\r\n                                                                        borderRadius: '50%',\r\n                                                                        background: theme.palette.success.dark,\r\n                                                                        color: 'white',\r\n                                                                        ml: 2\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <IconCheck />\r\n                                                                </Avatar>\r\n                                                            )}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <OutputResponses\r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            nodeId={node.id}\r\n                                                            nodeParamsType={nodeParamsType}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            nodes={nodes}\r\n                                                            edges={edges}\r\n                                                            workflow={workflow}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>\r\n                                        )}\r\n                                    </PerfectScrollbar>\r\n                                    <VariableSelector\r\n                                        key={JSON.stringify(availableNodesForVariable)}\r\n                                        nodes={availableNodesForVariable}\r\n                                        isVariableSelectorOpen={isVariableSelectorOpen}\r\n                                        anchorEl={anchorRef.current}\r\n                                        onVariableSelected={(returnVariablePath) => onVariableSelected(returnVariablePath)}\r\n                                        handleClose={() => setVariableSelectorOpen(false)}\r\n                                    />\r\n                                    <EditVariableDialog\r\n                                        key={JSON.stringify(editVariableDialogProps)}\r\n                                        show={isEditVariableDialogOpen}\r\n                                        dialogProps={editVariableDialogProps}\r\n                                        onCancel={() => setEditVariableDialog(false)}\r\n                                        onConfirm={(updateValues) => {\r\n                                            valueChanged(updateValues, expanded);\r\n                                            setEditVariableDialog(false);\r\n                                        }}\r\n                                    />\r\n                                </MainCard>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nEditNodes.propTypes = {\r\n    node: PropTypes.object,\r\n    nodes: PropTypes.array,\r\n    edges: PropTypes.array,\r\n    workflow: PropTypes.object,\r\n    onNodeLabelUpdate: PropTypes.func,\r\n    onNodeValuesUpdate: PropTypes.func\r\n};\r\n\r\nexport default EditNodes;\r\n","import { createPortal } from 'react-dom';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\r\nimport useConfirm from 'hooks/useConfirm';\r\n\r\nconst ConfirmDialog = () => {\r\n    const { onConfirm, onCancel, confirmState } = useConfirm();\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const component = confirmState.show ? (\r\n        <Dialog\r\n            fullWidth\r\n            maxWidth=\"xs\"\r\n            open={confirmState.show}\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {confirmState.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText sx={{ color: 'black' }} id=\"alert-dialog-description\">\r\n                    {confirmState.description}\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={onCancel}>{confirmState.cancelButtonName}</Button>\r\n                <Button variant=\"contained\" onClick={onConfirm}>\r\n                    {confirmState.confirmButtonName}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n};\r\n\r\nexport default ConfirmDialog;\r\n","import { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Box,\r\n    Divider,\r\n    InputAdornment,\r\n    List,\r\n    ListItemButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    OutlinedInput,\r\n    Stack\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// icons\r\nimport { IconSearch } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst TestWorkflowDialog = ({ show, dialogProps, onCancel, onItemClick }) => {\r\n    const portalElement = document.getElementById('portal');\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [nodes, setNodes] = useState([]);\r\n\r\n    const filterSearch = (value) => {\r\n        setSearchValue(value);\r\n        setTimeout(() => {\r\n            if (value) {\r\n                const returnData = dialogProps.nodes.filter((nd) => nd.data.label.toLowerCase().includes(value.toLowerCase()));\r\n                setNodes(returnData);\r\n            } else if (value === '') {\r\n                setNodes(dialogProps.nodes);\r\n            }\r\n        }, 500);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (dialogProps.nodes) {\r\n            setNodes(dialogProps.nodes);\r\n        }\r\n    }, [dialogProps]);\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            fullWidth\r\n            maxWidth=\"md\"\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Stack>\r\n                    <span>Select a starting point to test from. Workflow will be executed from the starting point till the end.</span>\r\n                </Stack>\r\n                <Box sx={{ p: 2 }}>\r\n                    <OutlinedInput\r\n                        sx={{ width: '100%', pr: 1, pl: 2, my: 2 }}\r\n                        id=\"input-search-node\"\r\n                        value={searchValue}\r\n                        onChange={(e) => filterSearch(e.target.value)}\r\n                        placeholder=\"Search nodes\"\r\n                        startAdornment={\r\n                            <InputAdornment position=\"start\">\r\n                                <IconSearch stroke={1.5} size=\"1rem\" color={theme.palette.grey[500]} />\r\n                            </InputAdornment>\r\n                        }\r\n                        aria-describedby=\"search-helper-text\"\r\n                        inputProps={{\r\n                            'aria-label': 'weight'\r\n                        }}\r\n                    />\r\n                    <Divider />\r\n                </Box>\r\n                <div>\r\n                    <Box sx={{ p: 2 }}>\r\n                        <List\r\n                            sx={{\r\n                                width: '100%',\r\n                                py: 0,\r\n                                borderRadius: '10px',\r\n                                [theme.breakpoints.down('md')]: {\r\n                                    maxWidth: 300\r\n                                },\r\n                                '& .MuiListItemSecondaryAction-root': {\r\n                                    top: 22\r\n                                },\r\n                                '& .MuiDivider-root': {\r\n                                    my: 0\r\n                                },\r\n                                '& .list-container': {\r\n                                    pl: 7\r\n                                }\r\n                            }}\r\n                        >\r\n                            {nodes.map((node) => (\r\n                                <div key={node.id}>\r\n                                    <ListItemButton\r\n                                        sx={{ p: 0, borderRadius: `${customization.borderRadius}px` }}\r\n                                        onClick={() => onItemClick(node.id)}\r\n                                    >\r\n                                        <ListItem alignItems=\"center\">\r\n                                            <ListItemAvatar>\r\n                                                <div style={{ width: 50, height: 50, borderRadius: '50%', backgroundColor: 'white' }}>\r\n                                                    <img\r\n                                                        style={{ width: '100%', height: '100%', padding: 10, objectFit: 'contain' }}\r\n                                                        alt={node.data.name}\r\n                                                        src={`${baseURL}/api/v1/node-icon/${node.data.name}`}\r\n                                                    />\r\n                                                </div>\r\n                                            </ListItemAvatar>\r\n                                            <ListItemText sx={{ ml: 1 }} primary={node.data.label} secondary={node.data.description} />\r\n                                        </ListItem>\r\n                                    </ListItemButton>\r\n                                    <Divider />\r\n                                </div>\r\n                            ))}\r\n                        </List>\r\n                    </Box>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n};\r\n\r\nTestWorkflowDialog.propTypes = {\r\n    show: PropTypes.bool,\r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n    onItemClick: PropTypes.func\r\n};\r\n\r\nexport default TestWorkflowDialog;\r\n","import client from './client';\r\n\r\nconst deleteAllTestWebhooks = () => client.post(`/remove-test-webhooks`);\r\n\r\nexport default {\r\n    deleteAllTestWebhooks\r\n};\r\n","import { useEffect, useRef, useState, useCallback } from 'react';\r\nimport ReactFlow, { ReactFlowProvider, addEdge, MiniMap, Controls, Background, useNodesState, useEdgesState } from 'react-flow-renderer';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { usePrompt, useNavigate } from 'react-router-dom';\r\nimport {\r\n    REMOVE_DIRTY,\r\n    SET_DIRTY,\r\n    SET_WORKFLOW,\r\n    enqueueSnackbar as enqueueSnackbarAction,\r\n    closeSnackbar as closeSnackbarAction\r\n} from 'store/actions';\r\n\r\n// material-ui\r\nimport { Toolbar, Box, AppBar, Button, Fab, CircularProgress } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// project imports\r\nimport CanvasNode from './CanvasNode';\r\nimport ButtonEdge from './ButtonEdge';\r\nimport CanvasHeader from './CanvasHeader';\r\nimport AddNodes from './AddNodes';\r\nimport EditNodes from './EditNodes';\r\nimport ConfirmDialog from 'ui-component/dialog/ConfirmDialog';\r\nimport TestWorkflowDialog from 'ui-component/dialog/TestWorkflowDialog';\r\n\r\n// API\r\nimport nodesApi from 'api/nodes';\r\nimport workflowsApi from 'api/workflows';\r\nimport webhooksApi from 'api/webhooks';\r\n\r\n// Hooks\r\nimport useApi from 'hooks/useApi';\r\nimport useConfirm from 'hooks/useConfirm';\r\n\r\n// icons\r\nimport { IconX, IconBolt } from '@tabler/icons';\r\n\r\n// third party\r\nimport socketIOClient from 'socket.io-client';\r\n\r\n// utils\r\nimport {\r\n    generateWebhookEndpoint,\r\n    getUniqueNodeId,\r\n    checkIfNodeLabelUnique,\r\n    addAnchors,\r\n    getEdgeLabelName,\r\n    checkMultipleTriggers\r\n} from 'utils/genericHelper';\r\nimport useNotifier from 'utils/useNotifier';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst nodeTypes = { customNode: CanvasNode };\r\nconst edgeTypes = { buttonedge: ButtonEdge };\r\n\r\n// ==============================|| CANVAS ||============================== //\r\n\r\nconst Canvas = () => {\r\n    const theme = useTheme();\r\n    const navigate = useNavigate();\r\n\r\n    const URLpath = document.location.pathname.toString().split('/');\r\n    const workflowShortId = URLpath[URLpath.length - 1] && URLpath[URLpath.length - 1].startsWith('W') ? URLpath[URLpath.length - 1] : '';\r\n\r\n    const { confirm } = useConfirm();\r\n\r\n    const dispatch = useDispatch();\r\n    const canvas = useSelector((state) => state.canvas);\r\n    const [canvasDataStore, setCanvasDataStore] = useState(canvas);\r\n    const [workflow, setWorkflow] = useState(null);\r\n    const [isTestWorkflowDialogOpen, setTestWorkflowDialogOpen] = useState(false);\r\n    const [testWorkflowDialogProps, setTestWorkflowDialogProps] = useState({});\r\n    const [isTestingWorkflow, setIsTestingWorkflow] = useState(false);\r\n\r\n    // ==============================|| Snackbar ||============================== //\r\n\r\n    useNotifier();\r\n    const enqueueSnackbar = (...args) => dispatch(enqueueSnackbarAction(...args));\r\n    const closeSnackbar = (...args) => dispatch(closeSnackbarAction(...args));\r\n\r\n    // ==============================|| ReactFlow ||============================== //\r\n\r\n    const [nodes, setNodes, onNodesChange] = useNodesState();\r\n    const [edges, setEdges, onEdgesChange] = useEdgesState();\r\n\r\n    const [rfInstance, setRfInstance] = useState(null);\r\n    const [selectedNode, setSelectedNode] = useState(null);\r\n\r\n    const reactFlowWrapper = useRef(null);\r\n\r\n    // ==============================|| Workflow API ||============================== //\r\n\r\n    const getNodesApi = useApi(nodesApi.getAllNodes);\r\n    const removeTestTriggersApi = useApi(nodesApi.removeTestTriggers);\r\n    const deleteAllTestWebhooksApi = useApi(webhooksApi.deleteAllTestWebhooks);\r\n    const createNewWorkflowApi = useApi(workflowsApi.createNewWorkflow);\r\n    const testWorkflowApi = useApi(workflowsApi.testWorkflow);\r\n    const updateWorkflowApi = useApi(workflowsApi.updateWorkflow);\r\n    const getSpecificWorkflowApi = useApi(workflowsApi.getSpecificWorkflow);\r\n\r\n    // ==============================|| Events & Actions ||============================== //\r\n\r\n    const onConnect = (params) => {\r\n        const newEdge = {\r\n            ...params,\r\n            type: 'buttonedge',\r\n            id: `${params.source}-${params.sourceHandle}-${params.target}-${params.targetHandle}`,\r\n            data: { label: getEdgeLabelName(params.sourceHandle) }\r\n        };\r\n        setEdges((eds) => addEdge(newEdge, eds));\r\n        setDirty();\r\n    };\r\n\r\n    const handleTestWorkflow = () => {\r\n        try {\r\n            if (workflow.deployed) {\r\n                alert('Testing workflow requires stopping deployed workflow. Please stop deployed workflow first');\r\n                return;\r\n            }\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const nodes = rfInstanceObject.nodes || [];\r\n            setTestWorkflowDialogOpen(true);\r\n            setTestWorkflowDialogProps({\r\n                title: 'Test Workflow',\r\n                nodes: nodes.filter((nd) => !nd.id.includes('ifElse'))\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const onStartingPointClick = (startingNodeId) => {\r\n        try {\r\n            const socket = socketIOClient(baseURL);\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const nodes = rfInstanceObject.nodes || [];\r\n            const edges = rfInstanceObject.edges || [];\r\n            setTestWorkflowDialogOpen(false);\r\n\r\n            socket.on('connect', () => {\r\n                const clientId = socket.id;\r\n                const node = nodes.find((nd) => nd.id === startingNodeId);\r\n                const nodeData = node.data;\r\n                const body = {\r\n                    nodes,\r\n                    edges,\r\n                    clientId,\r\n                    nodeData\r\n                };\r\n                testWorkflowApi.request(startingNodeId, body);\r\n                setNodes((nds) =>\r\n                    nds.map((node) => {\r\n                        node.data = {\r\n                            ...node.data,\r\n                            outputResponses: {\r\n                                ...node.data.outputResponses,\r\n                                submit: null,\r\n                                needRetest: null\r\n                            },\r\n                            selected: false\r\n                        };\r\n                        return node;\r\n                    })\r\n                );\r\n                setIsTestingWorkflow(true);\r\n            });\r\n\r\n            socket.on('testWorkflowNodeResponse', (value) => {\r\n                const { nodeId, data, status } = value;\r\n\r\n                const node = nodes.find((nd) => nd.id === nodeId);\r\n                if (node) {\r\n                    const outputValues = {\r\n                        submit: status === 'FINISHED' ? true : null,\r\n                        needRetest: status === 'FINISHED' ? null : true,\r\n                        output: data\r\n                    };\r\n                    const nodeData = node.data;\r\n                    nodeData['outputResponses'] = outputValues;\r\n                    setNodes((nds) =>\r\n                        nds.map((node) => {\r\n                            if (node.id === nodeId) {\r\n                                node.data = {\r\n                                    ...nodeData,\r\n                                    selected: false\r\n                                };\r\n                            }\r\n                            return node;\r\n                        })\r\n                    );\r\n                }\r\n            });\r\n\r\n            socket.on('testWorkflowNodeFinish', () => {\r\n                setIsTestingWorkflow(false);\r\n                socket.disconnect();\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const handleLoadWorkflow = (file) => {\r\n        try {\r\n            const flowData = JSON.parse(file);\r\n            const nodes = flowData.nodes || [];\r\n\r\n            for (let i = 0; i < nodes.length; i += 1) {\r\n                const nodeData = nodes[i].data;\r\n                if (nodeData.type === 'webhook') nodeData.webhookEndpoint = generateWebhookEndpoint();\r\n            }\r\n\r\n            setNodes(nodes);\r\n            setEdges(flowData.edges || []);\r\n            setDirty();\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const handleDeployWorkflow = async () => {\r\n        if (rfInstance) {\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const flowData = JSON.stringify(rfInstanceObject);\r\n\r\n            try {\r\n                // Always save workflow first\r\n                let savedWorkflowResponse;\r\n                if (!workflow.shortId) {\r\n                    const newWorkflowBody = {\r\n                        name: workflow.name,\r\n                        deployed: false,\r\n                        flowData\r\n                    };\r\n                    const response = await workflowsApi.createNewWorkflow(newWorkflowBody);\r\n                    savedWorkflowResponse = response.data;\r\n                } else {\r\n                    const updateBody = {\r\n                        flowData\r\n                    };\r\n                    const response = await workflowsApi.updateWorkflow(workflow.shortId, updateBody);\r\n                    savedWorkflowResponse = response.data;\r\n                }\r\n\r\n                dispatch({ type: REMOVE_DIRTY });\r\n\r\n                // Then deploy\r\n                const response = await workflowsApi.deployWorkflow(savedWorkflowResponse.shortId);\r\n                const deployedWorkflowResponse = response.data;\r\n                dispatch({ type: SET_WORKFLOW, workflow: deployedWorkflowResponse });\r\n\r\n                enqueueSnackbar({\r\n                    message: 'Workflow deployed!',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'success',\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n            } catch (error) {\r\n                const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleStopWorkflow = async () => {\r\n        try {\r\n            const response = await workflowsApi.deployWorkflow(workflow.shortId, { halt: true });\r\n            const stoppedWorkflowResponse = response.data;\r\n            dispatch({ type: SET_WORKFLOW, workflow: stoppedWorkflowResponse });\r\n\r\n            enqueueSnackbar({\r\n                message: 'Workflow stopped',\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'success',\r\n                    action: (key) => (\r\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    )\r\n                }\r\n            });\r\n        } catch (error) {\r\n            const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n            enqueueSnackbar({\r\n                message: errorData,\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'error',\r\n                    persist: true,\r\n                    action: (key) => (\r\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    )\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleDeleteWorkflow = async () => {\r\n        const confirmPayload = {\r\n            title: `Delete`,\r\n            description: `Delete workflow ${workflow.name}?`,\r\n            confirmButtonName: 'Delete',\r\n            cancelButtonName: 'Cancel'\r\n        };\r\n        const isConfirmed = await confirm(confirmPayload);\r\n\r\n        if (isConfirmed) {\r\n            try {\r\n                await workflowsApi.deleteWorkflow(workflow.shortId);\r\n                navigate(-1);\r\n            } catch (error) {\r\n                const errorData = error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSaveFlow = (workflowName) => {\r\n        if (rfInstance) {\r\n            setNodes((nds) =>\r\n                nds.map((node) => {\r\n                    node.data = {\r\n                        ...node.data,\r\n                        selected: false\r\n                    };\r\n                    return node;\r\n                })\r\n            );\r\n\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const flowData = JSON.stringify(rfInstanceObject);\r\n\r\n            if (!workflow.shortId) {\r\n                const newWorkflowBody = {\r\n                    name: workflowName,\r\n                    deployed: false,\r\n                    flowData\r\n                };\r\n                createNewWorkflowApi.request(newWorkflowBody);\r\n            } else {\r\n                const updateBody = {\r\n                    name: workflowName,\r\n                    flowData\r\n                };\r\n                updateWorkflowApi.request(workflow.shortId, updateBody);\r\n            }\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeDoubleClick = useCallback((event, clickedNode) => {\r\n        setSelectedNode(clickedNode);\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === clickedNode.id) {\r\n                    node.data = {\r\n                        ...node.data,\r\n                        selected: true\r\n                    };\r\n                } else {\r\n                    node.data = {\r\n                        ...node.data,\r\n                        selected: false\r\n                    };\r\n                }\r\n\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeLabelUpdate = useCallback((nodeLabel) => {\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === selectedNode.id) {\r\n                    if (!checkIfNodeLabelUnique(nodeLabel, rfInstance.getNodes())) {\r\n                        enqueueSnackbar({\r\n                            message: 'Duplicated node label',\r\n                            options: {\r\n                                key: new Date().getTime() + Math.random(),\r\n                                variant: 'error',\r\n                                persist: true,\r\n                                action: (key) => (\r\n                                    <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                        <IconX />\r\n                                    </Button>\r\n                                )\r\n                            }\r\n                        });\r\n                    } else {\r\n                        if (node.data.label !== nodeLabel) {\r\n                            setTimeout(() => setDirty(), 0);\r\n                        }\r\n                        node.data = {\r\n                            ...node.data,\r\n                            label: nodeLabel\r\n                        };\r\n                    }\r\n                }\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeValuesUpdate = useCallback((nodeFlowData) => {\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === selectedNode.id) {\r\n                    setTimeout(() => setDirty(), 0);\r\n                    node.data = {\r\n                        ...node.data,\r\n                        ...nodeFlowData,\r\n                        selected: true\r\n                    };\r\n                }\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    const onDragOver = useCallback((event) => {\r\n        event.preventDefault();\r\n        event.dataTransfer.dropEffect = 'move';\r\n    }, []);\r\n\r\n    const onDrop = useCallback(\r\n        (event) => {\r\n            event.preventDefault();\r\n            const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\r\n            let nodeData = event.dataTransfer.getData('application/reactflow');\r\n\r\n            // check if the dropped element is valid\r\n            if (typeof nodeData === 'undefined' || !nodeData) {\r\n                return;\r\n            }\r\n\r\n            nodeData = JSON.parse(nodeData);\r\n\r\n            // check if workflow contains multiple triggers/webhooks\r\n            if ((nodeData.type === 'webhook' || nodeData.type === 'trigger') && checkMultipleTriggers(rfInstance.getNodes())) {\r\n                enqueueSnackbar({\r\n                    message: 'Workflow can only contains 1 trigger or webhook node',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: (key) => (\r\n                            <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        )\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (nodeData.type === 'webhook') nodeData.webhookEndpoint = generateWebhookEndpoint();\r\n\r\n            const position = rfInstance.project({\r\n                x: event.clientX - reactFlowBounds.left - 100,\r\n                y: event.clientY - reactFlowBounds.top - 50\r\n            });\r\n\r\n            const newNodeId = getUniqueNodeId(nodeData, rfInstance.getNodes());\r\n\r\n            const newNode = {\r\n                id: newNodeId,\r\n                position,\r\n                type: 'customNode',\r\n                data: addAnchors(nodeData, rfInstance.getNodes(), newNodeId)\r\n            };\r\n\r\n            setSelectedNode(newNode);\r\n            setNodes((nds) =>\r\n                nds.concat(newNode).map((node) => {\r\n                    if (node.id === newNode.id) {\r\n                        node.data = {\r\n                            ...node.data,\r\n                            selected: true\r\n                        };\r\n                    } else {\r\n                        node.data = {\r\n                            ...node.data,\r\n                            selected: false\r\n                        };\r\n                    }\r\n\r\n                    return node;\r\n                })\r\n            );\r\n            setTimeout(() => setDirty(), 0);\r\n        },\r\n\r\n        // eslint-disable-next-line\r\n        [rfInstance]\r\n    );\r\n\r\n    const saveWorkflowSuccess = () => {\r\n        dispatch({ type: REMOVE_DIRTY });\r\n        enqueueSnackbar({\r\n            message: 'Workflow saved',\r\n            options: {\r\n                key: new Date().getTime() + Math.random(),\r\n                variant: 'success',\r\n                action: (key) => (\r\n                    <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                        <IconX />\r\n                    </Button>\r\n                )\r\n            }\r\n        });\r\n    };\r\n\r\n    const setDirty = () => {\r\n        dispatch({ type: SET_DIRTY });\r\n    };\r\n\r\n    // ==============================|| useEffect ||============================== //\r\n\r\n    // Get specific workflow successful\r\n    useEffect(() => {\r\n        if (getSpecificWorkflowApi.data) {\r\n            const workflow = getSpecificWorkflowApi.data;\r\n            const initialFlow = workflow.flowData ? JSON.parse(workflow.flowData) : [];\r\n            setNodes(initialFlow.nodes || []);\r\n            setEdges(initialFlow.edges || []);\r\n            dispatch({ type: SET_WORKFLOW, workflow });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [getSpecificWorkflowApi.data]);\r\n\r\n    // Create new workflow successful\r\n    useEffect(() => {\r\n        if (createNewWorkflowApi.data) {\r\n            const workflow = createNewWorkflowApi.data;\r\n            dispatch({ type: SET_WORKFLOW, workflow });\r\n            saveWorkflowSuccess();\r\n            window.history.replaceState(null, null, `/canvas/${workflow.shortId}`);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [createNewWorkflowApi.data]);\r\n\r\n    // Update workflow successful\r\n    useEffect(() => {\r\n        if (updateWorkflowApi.data) {\r\n            dispatch({ type: SET_WORKFLOW, workflow: updateWorkflowApi.data });\r\n            saveWorkflowSuccess();\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [updateWorkflowApi.data]);\r\n\r\n    // Test workflow failed\r\n    useEffect(() => {\r\n        if (testWorkflowApi.error) {\r\n            enqueueSnackbar({\r\n                message: 'Test workflow failed',\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'error',\r\n                    persist: true,\r\n                    action: (key) => (\r\n                        <Button style={{ color: 'white' }} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    )\r\n                }\r\n            });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testWorkflowApi.error]);\r\n\r\n    // Listen to edge button click remove redux event\r\n    useEffect(() => {\r\n        if (rfInstance) {\r\n            const edges = rfInstance.getEdges();\r\n            setEdges(edges.filter((edge) => edge.id !== canvasDataStore.removeEdgeId));\r\n            setDirty();\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [canvasDataStore.removeEdgeId]);\r\n\r\n    useEffect(() => setWorkflow(canvasDataStore.workflow), [canvasDataStore.workflow]);\r\n\r\n    // Initialization\r\n    useEffect(() => {\r\n        removeTestTriggersApi.request();\r\n        deleteAllTestWebhooksApi.request();\r\n\r\n        if (workflowShortId) {\r\n            getSpecificWorkflowApi.request(workflowShortId);\r\n        } else {\r\n            setNodes([]);\r\n            setEdges([]);\r\n            dispatch({\r\n                type: SET_WORKFLOW,\r\n                workflow: {\r\n                    name: 'Untitled workflow'\r\n                }\r\n            });\r\n        }\r\n\r\n        getNodesApi.request();\r\n\r\n        // Clear dirty state before leaving and remove any ongoing test triggers and webhooks\r\n        return () => {\r\n            removeTestTriggersApi.request();\r\n            deleteAllTestWebhooksApi.request();\r\n\r\n            setTimeout(() => dispatch({ type: REMOVE_DIRTY }), 0);\r\n        };\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setCanvasDataStore(canvas);\r\n    }, [canvas]);\r\n\r\n    usePrompt('You have unsaved changes! Do you want to navigate away?', canvasDataStore.isDirty);\r\n\r\n    return (\r\n        <>\r\n            <Box>\r\n                <AppBar\r\n                    enableColorOnDark\r\n                    position=\"fixed\"\r\n                    color=\"inherit\"\r\n                    elevation={1}\r\n                    sx={{\r\n                        bgcolor: theme.palette.background.default\r\n                    }}\r\n                >\r\n                    <Toolbar>\r\n                        <CanvasHeader\r\n                            workflow={workflow}\r\n                            handleSaveFlow={handleSaveFlow}\r\n                            handleDeployWorkflow={handleDeployWorkflow}\r\n                            handleStopWorkflow={handleStopWorkflow}\r\n                            handleDeleteWorkflow={handleDeleteWorkflow}\r\n                            handleLoadWorkflow={handleLoadWorkflow}\r\n                        />\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <Box sx={{ marginTop: '70px', height: '90vh', width: '100%' }}>\r\n                    <div className=\"reactflow-parent-wrapper\">\r\n                        <ReactFlowProvider>\r\n                            <div className=\"reactflow-wrapper\" ref={reactFlowWrapper}>\r\n                                <ReactFlow\r\n                                    nodes={nodes}\r\n                                    edges={edges}\r\n                                    onNodesChange={onNodesChange}\r\n                                    onNodeDoubleClick={onNodeDoubleClick}\r\n                                    onEdgesChange={onEdgesChange}\r\n                                    onDrop={onDrop}\r\n                                    onDragOver={onDragOver}\r\n                                    onNodeDragStop={setDirty}\r\n                                    nodeTypes={nodeTypes}\r\n                                    edgeTypes={edgeTypes}\r\n                                    onConnect={onConnect}\r\n                                    onInit={setRfInstance}\r\n                                    fitView\r\n                                >\r\n                                    <MiniMap\r\n                                        nodeStrokeColor={() => theme.palette.primary.main}\r\n                                        nodeColor={() => theme.palette.primary.main}\r\n                                        nodeBorderRadius={2}\r\n                                    />\r\n                                    <Controls\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            flexDirection: 'row',\r\n                                            left: '50%',\r\n                                            transform: 'translate(-50%, -50%)'\r\n                                        }}\r\n                                    />\r\n                                    <Background color=\"#aaa\" gap={16} />\r\n                                    <AddNodes nodesData={getNodesApi.data} node={selectedNode} />\r\n                                    <EditNodes\r\n                                        nodes={nodes}\r\n                                        edges={edges}\r\n                                        node={selectedNode}\r\n                                        workflow={workflow}\r\n                                        onNodeLabelUpdate={onNodeLabelUpdate}\r\n                                        onNodeValuesUpdate={onNodeValuesUpdate}\r\n                                    />\r\n                                    <Fab\r\n                                        sx={{ position: 'absolute', right: 20, top: 20 }}\r\n                                        size=\"small\"\r\n                                        color=\"warning\"\r\n                                        aria-label=\"test\"\r\n                                        title=\"Test Workflow\"\r\n                                        disabled={isTestingWorkflow}\r\n                                        onClick={handleTestWorkflow}\r\n                                    >\r\n                                        {<IconBolt />}\r\n                                    </Fab>\r\n                                    {isTestingWorkflow && (\r\n                                        <CircularProgress\r\n                                            size={50}\r\n                                            sx={{\r\n                                                color: theme.palette.warning.dark,\r\n                                                position: 'absolute',\r\n                                                right: 15,\r\n                                                top: 15\r\n                                            }}\r\n                                        />\r\n                                    )}\r\n                                </ReactFlow>\r\n                            </div>\r\n                        </ReactFlowProvider>\r\n                    </div>\r\n                </Box>\r\n                <ConfirmDialog />\r\n                <TestWorkflowDialog\r\n                    show={isTestWorkflowDialogOpen}\r\n                    dialogProps={testWorkflowDialogProps}\r\n                    onCancel={() => setTestWorkflowDialogOpen(false)}\r\n                    onItemClick={onStartingPointClick}\r\n                />\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Canvas;\r\n"],"sourceRoot":""}